{"changed":true,"filter":false,"title":"Search Results","tooltip":"/.c9/searchresults","value":"Searching for \u0001get_all_collections\u0001 in\u0001/\u0001 (Found 3 matches in 1 file)\n\n/get_all_collections.js:\n\t6: function get_all_collections(callback){\n\t20: exports.get_all_collections = get_all_collections;\n\nFound 3 matches in 1 file \n\n","undoManager":{"mark":-1,"position":14,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":[" "]},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":[" "]},{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["Searching for \u0001request_subscribe\u0001 in\u0001/\u0001","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["/connect_to_ripple.js:",""]},{"start":{"row":3,"column":0},"end":{"row":7,"column":0},"action":"insert","lines":["\t32:                 request_subscribe(accounts)","\t42: function request_subscribe(accounts){","\t47: var req = remote.request_subscribe();","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["/node_modules/ripple-lib/build/ripple-0.12.2-debug.js:",""]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["\t72: \teval(\"// Routines for working with an account.\\n//\\n// You should not instantiate this class yourself, instead use Remote#account.\\n//\\n// Events:\\n//   wallet_clean :  True, iff the wallet has been updated.\\n//   wallet_dirty :  True, iff the wallet needs to be updated.\\n//   balance:        The current stamp balance.\\n//   balance_proposed\\n//\\n\\n// var network = require('./network.js');\\nvar async              = __webpack_require__(47);\\nvar util               = __webpack_require__(41);\\nvar extend             = __webpack_require__(46);\\nvar EventEmitter       = __webpack_require__(39).EventEmitter;\\nvar Amount             = __webpack_require__(3).Amount;\\nvar UInt160            = __webpack_require__(9).UInt160;\\nvar TransactionManager = __webpack_require__(30).TransactionManager;\\nvar sjcl               = __webpack_require__(17).sjcl;\\nvar Base               = __webpack_require__(7).Base;\\n\\n/**\\n * @constructor Account\\n * @param {Remote} remote\\n * @param {String} account\\n */\\n\\nfunction Account(remote, account) {\\n  EventEmitter.call(this);\\n\\n  var self = this;\\n\\n  this._remote = remote;\\n  this._account = UInt160.from_json(account);\\n  this._account_id = this._account.to_json();\\n  this._subs = 0;\\n\\n  // Ledger entry object\\n  // Important: This must never be overwritten, only extend()-ed\\n  this._entry = { };\\n\\n  function listenerAdded(type, listener) {\\n    if (~Account.subscribeEvents.indexOf(type)) {\\n      if (!self._subs && self._remote._connected) {\\n        self._remote.request_subscribe()\\n        .add_account(self._account_id)\\n        .broadcast().request();\\n      }\\n      self._subs += 1;\\n    }\\n  };\\n\\n  this.on('newListener', listenerAdded);\\n\\n  function listenerRemoved(type, listener) {\\n    if (~Account.subscribeEvents.indexOf(type)) {\\n      self._subs -= 1;\\n      if (!self._subs && self._remote._connected) {\\n        self._remote.request_unsubscribe()\\n        .add_account(self._account_id)\\n        .broadcast().request();\\n      }\\n    }\\n  };\\n\\n  this.on('removeListener', listenerRemoved);\\n\\n  function attachAccount(request) {\\n    if (self._account.is_valid() && self._subs) {\\n      request.add_account(self._account_id);\\n    }\\n  };\\n\\n  this._remote.on('prepare_subscribe', attachAccount);\\n\\n  function handleTransaction(transaction) {\\n    if (!transaction.mmeta) {\\n      return;\\n    }\\n\\n    var changed = false;\\n\\n    transaction.mmeta.each(function(an) {\\n      var isAccount = an.fields.Account === self._account_id;\\n      var isAccountRoot = isAccount && (an.entryType === 'AccountRoot');\\n\\n      if (isAccountRoot) {\\n        extend(self._entry, an.fieldsNew, an.fieldsFinal);\\n        changed = true;\\n      }\\n    });\\n\\n    if (changed) {\\n      self.emit('entry', self._entry);\\n    }\\n  };\\n\\n  this.on('transaction', handleTransaction);\\n\\n  this._transactionManager = new TransactionManager(this);\\n\\n  return this;\\n};\\n\\nutil.inherits(Account, EventEmitter);\\n\\n/**\\n * List of events that require a remote subscription to the account.\\n */\\n\\nAccount.subscribeEvents = [ 'transaction', 'entry' ];\\n\\nAccount.prototype.toJson = function() {\\n  return this._account.to_json();\\n};\\n\\n/**\\n * Whether the AccountId is valid.\\n *\\n * Note: This does not tell you whether the account exists in the ledger.\\n */\\n\\nAccount.prototype.isValid = function() {\\n  return this._account.is_valid();\\n};\\n\\n/**\\n * Request account info\\n *\\n * @param {Function} callback\\n */\\n\\nAccount.prototype.getInfo = function(callback) {\\n  return this._remote.requestAccountInfo({account: this._account_id}, callback);\\n};\\n\\n/**\\n * Retrieve the current AccountRoot entry.\\n *\\n * To keep up-to-date with changes to the AccountRoot entry, subscribe to the\\n * 'entry' event.\\n *\\n * @param {Function} callback\\n */\\n\\nAccount.prototype.entry = function(callback) {\\n  var self = this;\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  function accountInfo(err, info) {\\n    if (err) {\\n      callback(err);\\n    } else {\\n      extend(self._entry, info.account_data);\\n      self.emit('entry', self._entry);\\n      callback(null, info);\\n    }\\n  };\\n\\n  this.getInfo(accountInfo);\\n\\n  return this;\\n};\\n\\nAccount.prototype.getNextSequence = function(callback) {\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  function isNotFound(err) {\\n    return err && typeof err === 'object'\\n    && typeof err.remote === 'object'\\n    && err.remote.error === 'actNotFound';\\n  };\\n\\n  function accountInfo(err, info) {\\n    if (isNotFound(err)) {\\n      // New accounts will start out as sequence one\\n      callback(null, 1);\\n    } else if (err) {\\n      callback(err);\\n    } else {\\n      callback(null, info.account_data.Sequence);\\n    }\\n  };\\n\\n  this.getInfo(accountInfo);\\n\\n  return this;\\n};\\n\\n/**\\n * Retrieve this account's Ripple trust lines.\\n *\\n * To keep up-to-date with changes to the AccountRoot entry, subscribe to the\\n * 'lines' event. (Not yet implemented.)\\n *\\n * @param {function(err, lines)} callback Called with the result\\n */\\n\\nAccount.prototype.lines = function(callback) {\\n  var self = this;\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  function accountLines(err, res) {\\n    if (err) {\\n      callback(err);\\n    } else {\\n      self._lines = res.lines;\\n      self.emit('lines', self._lines);\\n      callback(null, res);\\n    }\\n  }\\n\\n  this._remote.requestAccountLines({account: this._account_id}, accountLines);\\n\\n  return this;\\n};\\n\\n/**\\n * Retrieve this account's single trust line.\\n *\\n * @param {string} currency Currency\\n * @param {string} address Ripple address\\n * @param {function(err, line)} callback Called with the result\\n * @returns {Account}\\n */\\n\\nAccount.prototype.line = function(currency, address, callback) {\\n  var self = this;\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  self.lines(function(err, data) {\\n    if (err) {\\n      return callback(err);\\n    }\\n\\n    var line;\\n\\n    top:\\n    for (var i=0; i<data.lines.length; i++) {\\n      var l = data.lines[i];\\n      if (l.account === address && l.currency === currency) {\\n        line = l;\\n        break top;\\n      }\\n    }\\n\\n    callback(null, line);\\n  });\\n\\n  return this;\\n};\\n\\n/**\\n * Notify object of a relevant transaction.\\n *\\n * This is only meant to be called by the Remote class. You should never have to\\n * call this yourself.\\n *\\n * @param {Object} message\\n */\\n\\nAccount.prototype.notify =\\nAccount.prototype.notifyTx = function(transaction) {\\n  // Only trigger the event if the account object is actually\\n  // subscribed - this prevents some weird phantom events from\\n  // occurring.\\n  if (!this._subs) {\\n    return;\\n  }\\n\\n  this.emit('transaction', transaction);\\n\\n  var account = transaction.transaction.Account;\\n\\n  if (!account) {\\n    return;\\n  }\\n\\n  var isThisAccount = (account === this._account_id);\\n\\n  this.emit(isThisAccount ? 'transaction-outbound' : 'transaction-inbound', transaction);\\n};\\n\\n/**\\n * Submit a transaction to an account's\\n * transaction manager\\n *\\n * @param {Transaction} transaction\\n */\\n\\nAccount.prototype.submit = function(transaction) {\\n  this._transactionManager.submit(transaction);\\n};\\n\\n\\n/**\\n *  Check whether the given public key is valid for this account\\n *\\n *  @param {Hex-encoded String|RippleAddress} public_key\\n *  @param {Function} callback\\n *\\n *  @callback\\n *  @param {Error} err\\n *  @param {Boolean} true if the public key is valid and active, false otherwise\\n */\\nAccount.prototype.publicKeyIsActive = function(public_key, callback) {\\n  var self = this;\\n  var public_key_as_uint160;\\n\\n  try {\\n    public_key_as_uint160 = Account._publicKeyToAddress(public_key);\\n  } catch (err) {\\n    return callback(err);\\n  }\\n\\n  function getAccountInfo(async_callback) {\\n    self.getInfo(function(err, account_info_res){\\n\\n      // If the remote responds with an Account Not Found error then the account\\n      // is unfunded and thus we can assume that the master key is active\\n      if (err && err.remote && err.remote.error === 'actNotFound') {\\n        async_callback(null, null);\\n      } else {\\n        async_callback(err, account_info_res);\\n      }\\n    });\\n  };\\n\\n  function publicKeyIsValid(account_info_res, async_callback) {\\n    // Catch the case of unfunded accounts\\n    if (!account_info_res) {\\n\\n      if (public_key_as_uint160 === self._account_id) {\\n        async_callback(null, true);\\n      } else {\\n        async_callback(null, false);\\n      }\\n\\n      return;\\n    }\\n\\n    var account_info = account_info_res.account_data;\\n\\n    // Respond with true if the RegularKey is set and matches the given public key or\\n    // if the public key matches the account address and the lsfDisableMaster is not set\\n    if (account_info.RegularKey &&\\n      account_info.RegularKey === public_key_as_uint160) {\\n      async_callback(null, true);\\n    } else if (account_info.Account === public_key_as_uint160 &&\\n      ((account_info.Flags & 0x00100000) === 0)) {\\n      async_callback(null, true);\\n    } else {\\n      async_callback(null, false);\\n    }\\n  };\\n\\n  var steps = [\\n    getAccountInfo,\\n    publicKeyIsValid\\n  ];\\n\\n  async.waterfall(steps, callback);\\n};\\n\\n/**\\n *  Convert a hex-encoded public key to a Ripple Address\\n *\\n *  @static\\n *\\n *  @param {Hex-encoded string|RippleAddress} public_key\\n *  @returns {RippleAddress}\\n */\\nAccount._publicKeyToAddress = function(public_key) {\\n  // Based on functions in /src/js/ripple/keypair.js\\n  function hexToUInt160(public_key) {\\n    var bits = sjcl.codec.hex.toBits(public_key);\\n    var hash = sjcl.hash.ripemd160.hash(sjcl.hash.sha256.hash(bits));\\n    var address = UInt160.from_bits(hash);\\n    address.set_version(Base.VER_ACCOUNT_ID);\\n\\n    return address.to_json();\\n  };\\n\\n  if (UInt160.is_valid(public_key)) {\\n    return public_key;\\n  } else if (/^[0-9a-fA-F]+$/.test(public_key)) {\\n    return hexToUInt160(public_key);\\n  } else {\\n    throw new Error('Public key is invalid. Must be a UInt160 or a hex string');\\n  }\\n};\\n\\nexports.Account = Account;\\n\\n// vim:sw=2:sts=2:ts=8:et\\n\\n\\n/*****************\\n ** WEBPACK FOOTER\\n ** ./src/js/ripple/account.js\\n ** module id = 4\\n ** module chunks = 0\\n **/\\n//# sourceURL=webpack:///./src/js/ripple/account.js?\");","",""]},{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["/node_modules/ripple-lib/build/ripple-0.12.2-min.js:",""]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":13,"column":0},"action":"insert","lines":["\t2: return this.message[n]=(this.message[n]||[]).concat(r),this},n.prototype.setAccountsProposed=n.prototype.rtAccounts=n.prototype.accountsProposed=function(t){return this.accounts(t,!0)},n.prototype.addAccountProposed=function(t){return Array.isArray(t)?(t.forEach(this.addAccountProposed,this),this):this.addAccount(t,!0)},n.prototype.setBooks=n.prototype.books=function(t,e){this.message.books=[];for(var r=0,n=t.length;n>r;r++){var i=t[r];this.addBook(i,e)}return this},n.prototype.addBook=function(t,e){function r(e){if(!t[e])throw new Error(\"Missing \"+e);var r=n[e]={currency:u.json_rewrite(t[e].currency,{force_hex:!0})};u.from_json(r.currency).is_native()||(r.issuer=a.json_rewrite(t[e].issuer))}if(Array.isArray(t))return t.forEach(this.addBook,this),this;var n={};return[\"taker_gets\",\"taker_pays\"].forEach(r),\"boolean\"!=typeof e?n.snapshot=!0:e?n.snapshot=!0:delete n.snapshot,t.both&&(n.both=!0),this.message.books=(this.message.books||[]).concat(n),this},n.prototype.addStream=function(t,e){if(Array.isArray(e))switch(t){case\"accounts\":this.addAccount(e);break;case\"accounts_proposed\":this.addAccountProposed(e);break;case\"books\":this.addBook(e)}else if(arguments.length>1){for(arg in arguments)this.addStream(arguments[arg]);return}return Array.isArray(this.message.streams)||(this.message.streams=[]),-1===this.message.streams.indexOf(t)&&this.message.streams.push(t),this},e.Request=n},function(t,e,r){\"use strict\";function n(t){return new l(t).toPower(-1)}function i(){this._value=new l(0/0),this._is_native=!0,this._currency=new f,this._issuer=new u}var o=r(41),s=r(46),a=r(17),u=r(9).UInt160,c=r(11).Seed,f=r(6).Currency,h=r(49),l=h.another({ROUNDING_MODE:h.ROUND_HALF_UP,DECIMAL_PLACES:40});i.strict_mode=!0;var p={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new l(5),bi_7:new l(7),bi_10:new l(10),bi_1e14:new l(1e14),bi_1e16:new l(1e16),bi_1e17:new l(1e17),bi_1e32:new l(1e32),bi_man_max_value:new l(\"9999999999999999\"),bi_man_min_value:new l(1e15),bi_xns_max:new l(1e17),bi_xns_min:new l(-1e17),bi_xns_unit:new l(1e6),cMinOffset:-96,cMaxOffset:80,max_value:\"9999999999999999e80\",min_value:\"-1000000000000000e-96\"},d=new l(1e11),_=new l(p.max_value),y=new l(p.min_value).abs();s(i,p),e.consts=p,i.text_full_rewrite=function(t){return i.from_json(t).to_text_full()},i.json_rewrite=function(t){return i.from_json(t).to_json()},i.from_number=function(t){return(new i).parse_number(t)},i.from_json=function(t){return(new i).parse_json(t)},i.from_quality=function(t,e,r,n){return(new i).parse_quality(t,e,r,n)},i.from_human=function(t,e){return(new i).parse_human(t,e)},i.is_valid=function(t){return i.from_json(t).is_valid()},i.is_valid_full=function(t){return i.from_json(t).is_valid_full()},i.NaN=function(){var t=new i;return t._value=new l(0/0),t},i.prototype._set_value=function(t,e){o(t instanceof l),this._value=t.isZero()&&t.isNegative()?t.negated():t,this.canonicalize(e),this._check_limits()},i.prototype.abs=function(){return this.clone(this.is_negative())},i.prototype.add=function(t){var e=i.from_json(t);return this.is_comparable(e)?this._copy(this._value.plus(e._value)):new i(0/0)},i.prototype.subtract=function(t){return this.add(i.from_json(t).negate())},i.prototype.multiply=function(t){var e=i.from_json(t),r=e.is_native()?e._value.times(i.bi_xns_unit):e._value;return this._copy(this._value.times(r))},i.prototype.divide=function(t){var e=i.from_json(t);if(!this.is_valid())throw new Error(\"Invalid dividend\");if(!e.is_valid())throw new Error(\"Invalid divisor\");if(e.is_zero())throw new Error(\"divide by zero\");var r=e.is_native()?e._value.times(i.bi_xns_unit):e._value;return this._copy(this._value.dividedBy(r))},i.prototype.ratio_human=function(t,e){e=s({},e);var r=this.clone();return t=i.from_json(t),r.is_valid()&&t.is_valid()?t.is_zero()?new i(0/0):(e.reference_date&&(t=t.applyInterest(e.reference_date)),t._is_native&&r._set_value(r._value.times(i.bi_xns_unit)),r.divide(t)):new i(0/0)},i.prototype.product_human=function(t,e){if(e=e||{},t=i.from_json(t),!this.is_valid()||!t.is_valid())return new i(0/0);e.reference_date&&(t=t.applyInterest(e.reference_date));var r=this.multiply(t);return t._is_native&&r._set_value(r._value.dividedBy(i.bi_xns_unit)),r},i.prototype._invert=function(){return this._set_value(n(this._value)),this},i.prototype.invert=function(){return this.clone()._invert()},i.prototype.canonicalize=function(t){this._value=this._is_native?this._value.round(6,l.ROUND_DOWN):new l(t?this._value.toPrecision(16,t):this._value.toPrecision(16))},i.prototype._check_limits=function(){if(!i.strict_mode)return this;if(this._value.isNaN()||this._value.isZero())return this;var t=this._value.absoluteValue();if(this._is_native){if(t.greaterThan(d))throw new Error(\"Exceeding max value of \"+d.toString())}else{if(t.lessThan(y))throw new Error(\"Exceeding min value of \"+y.toString());if(t.greaterThan(_))throw new Error(\"Exceeding max value of \"+_.toString())}return this},i.prototype.clone=function(t){return this.copyTo(new i,t)},i.prototype._copy=function(t){var e=this.clone();return e._set_value(t),e},i.prototype.compareTo=function(t){var e=i.from_json(t);return this.is_comparable(e)?this._value.comparedTo(e._value):new i(0/0)},i.prototype.copyTo=function(t,e){return t._value=e?this._value.negated():this._value,t._is_native=this._is_native,t._currency=this._currency,t._issuer=this._issuer,t},i.prototype.currency=function(){return this._currency},i.prototype.equals=function(t,e){return t instanceof i?this.is_valid()&&t.is_valid()&&this._is_native===t._is_native&&this._value.equals(t._value)&&(this._is_native||this._currency.equals(t._currency)&&(e||this._issuer.equals(t._issuer))):this.equals(i.from_json(t))},i.prototype.is_comparable=function(t){return this.is_valid()&&t.is_valid()&&this._is_native===t._is_native},i.prototype.is_native=function(){return this._is_native},i.prototype.is_negative=function(){return this._value.isNegative()},i.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},i.prototype.is_valid=function(){return!this._value.isNaN()},i.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},i.prototype.is_zero=function(){return this._value.isZero()},i.prototype.issuer=function(){return this._issuer},i.prototype.negate=function(){return this.clone(\"NEGATE\")},i.prototype.parse_human=function(t,e){function r(t){return isFinite(t)&&\"\"!==t&&null!==t}e=e||{};var n,o,s=/^[a-fA-F0-9]{40}$/,a=/^([a-zA-Z]{3}|[0-9]{3})$/,u=t.split(\" \").filter(function(t){return\"\"!==t});if(1===u.length){if(r(u[0]))n=u[0],o=\"XRP\";else if(n=u[0].slice(0,-3),o=u[0].slice(-3),!r(n)||!o.match(a))return new i(0/0)}else{if(2!==u.length)return new i(0/0);if(r(u[0])&&u[1].match(s))n=u[0],o=u[1];else if(u[0].match(a)&&r(u[1]))n=u[1],o=u[0];else{if(!r(u[0])||!u[1].match(a))return new i(0/0);n=u[0],o=u[1]}}if(o=o.toUpperCase(),this.set_currency(o),this._is_native=\"XRP\"===o,this._set_value(new l(n)),e.reference_date&&this._currency.has_interest()){var c=this._currency.get_interest_at(e.reference_date);this._set_value(this._value.dividedBy(c.toString()))}return this},i.prototype.parse_issuer=function(t){return this._issuer=u.from_json(t),this},i.prototype.parse_quality=function(t,e,r,o){o=o||{};var s=f.from_json(o.base_currency),a=t.substring(t.length-14),c=t.substring(t.length-16,t.length-14),h=new l(a,16),p=parseInt(c,16)-100,d=new l(h.toString()+\"e\"+p.toString());if(this._currency=f.from_json(e),this._issuer=u.from_json(r),this._is_native=this._currency.is_native(),this._is_native&&s.is_native())throw new Error(\"XRP/XRP quality is not allowed\");var _=o.inverse?n(d):d,y=_;if(o.xrp_as_drops||(this._is_native?y=_.div(i.bi_xns_unit):s.is_valid()&&s.is_native()&&(y=_.times(i.bi_xns_unit))),this._set_value(y),o.reference_date&&s.is_valid()&&s.has_interest()){var m=s.get_interest_at(o.reference_date);this._set_value(this._value.dividedBy(m.toString()))}return this},i.prototype.parse_number=function(t){return this._is_native=!1,this._currency=f.from_json(1),this._issuer=u.from_json(1),this._set_value(new l(t)),this},i.prototype.parse_json=function(t){switch(typeof t){case\"string\":var e=t.match(/^([^/]+)\\/([^/]+)(?:\\/(.+))?$/);e?(this._currency=f.from_json(e[2]),this._issuer=u.from_json(e[3]?e[3]:\"1\"),this.parse_value(e[1])):(this.parse_native(t),this._currency=f.from_json(\"0\"),this._issuer=u.from_json(\"0\"));break;case\"number\":this.parse_json(String(t));break;case\"object\":if(null===t)break;t instanceof i?t.copyTo(this):t.hasOwnProperty(\"value\")&&(this._currency.parse_json(t.currency,!0),\"string\"==typeof t.issuer&&this._issuer.parse_json(t.issuer),this.parse_value(t.value));break;default:this._set_value(new l(0/0))}return this},i.prototype.parse_native=function(t){if(t&&\"string\"==typeof t&&!isNaN(t)){if(t.indexOf(\".\")>=0)throw new Error(\"Native amounts must be specified in integer drops\");var e=new l(t);this._is_native=!0,this._set_value(e.dividedBy(i.bi_xns_unit))}else this._set_value(new l(0/0));return this},i.prototype.parse_value=function(t){return this._is_native=!1,this._set_value(new l(t),l.ROUND_DOWN),this},i.prototype.set_currency=function(t){return this._currency=f.from_json(t),this._is_native=this._currency.is_native(),this},i.prototype.set_issuer=function(t){return this._issuer=t instanceof u?t:u.from_json(t),this},i.prototype.to_number=function(){return Number(this.to_text())},i.prototype.to_text=function(){if(!this.is_valid())return\"NaN\";if(this._is_native)return this._value.times(i.bi_xns_unit).toString();var t=this._value.e-15,e=this._value.isNegative()?\"-\":\"\",r=a.getMantissaDecimalString(this._value.absoluteValue());if(0!==t&&(-25>t||t>-4))return e+r.toString()+\"e\"+t.toString();var n=\"000000000000000000000000000\"+r.toString()+\"00000000000000000000000\",o=n.substring(0,t+43),s=n.substring(t+43),u=o.match(/[1-9].*$/),c=s.match(/[1-9]0*$/);return e+(u?u[0]:\"0\")+(c?\".\"+s.substring(0,1+s.length-c[0].length):\"\")},i.prototype.applyInterest=function(t){if(!this._currency.has_interest())return this;var e=this._currency.get_interest_at(t);return this._copy(this._value.times(e.toString()))},i.prototype.to_human=function(t){if(t=t||{},!this.is_valid())return\"NaN\";var e=this;t.reference_date&&(e=this.applyInterest(t.reference_date));var r=e._value.isNegative(),n=e._value.abs().toFixed(),i=n.split(\".\"),o=i[0],s=2===i.length?i[1]:\"\";if(o=o.replace(/^0*/,\"\"),s=s.replace(/0*$/,\"\"),s.length||!t.skip_empty_fraction){if(\"number\"==typeof t.precision){var u=Math.max(0,t.precision);u=Math.min(u,s.length);var c=Number(\"0.\"+s).toFixed(u);for(1>c?s=c.substring(2):(o=(Number(o)+1).toString(),s=\"\");s.length<u;)s=\"0\"+s}if(\"number\"==typeof t.max_sig_digits){var f=0===Number(o),h=f?0:o.length,l=f?s.replace(/^0*/,\"\"):s;h+=l.length;var p=h-t.max_sig_digits;p=Math.max(p,0),p=Math.min(p,s.length),p>0&&(s=s.slice(0,-p))}if(\"number\"==typeof t.min_precision)for(t.min_precision=Math.max(0,t.min_precision);s.length<t.min_precision;)s+=\"0\"}if(t.group_sep!==!1){var d=\"string\"==typeof t.group_sep?t.group_sep:\",\",_=a.chunkString(o,t.group_width||3,!0);o=_.join(d)}var y=\"\";return r&&t.signed!==!1&&(y+=\"-\"),y+=o.length?o:\"0\",y+=s.length?\".\"+s:\"\"},i.prototype.to_human_full=function(t){t=t||{};var e=this.to_human(t),r=this._currency.to_human(),n=this._issuer.to_json(t),i=e+\"/\"+r;return this.is_native()?i:i+\"/\"+n},i.prototype.to_json=function(){if(this._is_native)return this.to_text();var t={value:this.to_text(),currency:this._currency.has_interest()?this._currency.to_hex():this._currency.to_json()};return this._issuer.is_valid()&&(t.issuer=this._issuer.to_json()),t},i.prototype.to_text_full=function(t){return this.is_valid()?this._is_native?this.to_human()+\"/XRP\":this.to_text()+\"/\"+this._currency.to_json()+\"/\"+this._issuer.to_json(t):\"NaN\"},i.prototype.not_equals_why=function(t,e){if(\"string\"==typeof t)return this.not_equals_why(i.from_json(t));if(!(t instanceof i))return\"Not an Amount\";if(!this.is_valid()||!t.is_valid())return\"Invalid amount.\";if(this._is_native!==t._is_native)return\"Native mismatch.\";var r=this._is_native?\"XRP\":\"Non-XRP\";if(!this._value.isZero()&&this._value.negated().equals(t._value))return r+\" sign differs.\";if(!this._value.equals(t._value))return r+\" value differs.\";if(!this._is_native){if(!this._currency.equals(t._currency))return\"Non-XRP currency differs.\";if(!e&&!this._issuer.equals(t._issuer))return\"Non-XRP issuer differs: \"+t._issuer.to_json()+\"/\"+this._issuer.to_json()}},e.Amount=i,e.Currency=f,e.Seed=c,e.UInt160=u},function(t,e,r){function n(t,e){function r(t){~n.subscribeEvents.indexOf(t)&&(!h._subs&&h._remote._connected&&h._remote.request_subscribe().add_account(h._account_id).broadcast().request(),h._subs+=1)}function i(t){~n.subscribeEvents.indexOf(t)&&(h._subs-=1,!h._subs&&h._remote._connected&&h._remote.request_unsubscribe().add_account(h._account_id).broadcast().request())}function o(t){h._account.is_valid()&&h._subs&&t.add_account(h._account_id)}function f(t){if(t.mmeta){var e=!1;t.mmeta.each(function(t){var r=t.fields.Account===h._account_id,n=r&&\"AccountRoot\"===t.entryType;n&&(s(h._entry,t.fieldsNew,t.fieldsFinal),e=!0)}),e&&h.emit(\"entry\",h._entry)}}a.call(this);var h=this;return this._remote=t,this._account=u.from_json(e),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on(\"newListener\",r),this.on(\"removeListener\",i),this._remote.on(\"prepare_subscribe\",o),this.on(\"transaction\",f),this._transactionManager=new c(this),this}var i=r(48),o=r(40),s=r(46),a=r(39).EventEmitter,u=(r(3).Amount,r(9).UInt160),c=r(30).TransactionManager,f=r(17).sjcl,h=r(7).Base;o.inherits(n,a),n.subscribeEvents=[\"transaction\",\"entry\"],n.prototype.toJson=function(){return this._account.to_json()},n.prototype.isValid=function(){return this._account.is_valid()},n.prototype.getInfo=function(t){return this._remote.requestAccountInfo({account:this._account_id},t)},n.prototype.entry=function(t){function e(e,n){e?t(e):(s(r._entry,n.account_data),r.emit(\"entry\",r._entry),t(null,n))}var r=this,t=\"function\"==typeof t?t:function(){};return this.getInfo(e),this},n.prototype.getNextSequence=function(t){function e(t){return t&&\"object\"==typeof t&&\"object\"==typeof t.remote&&\"actNotFound\"===t.remote.error}function r(r,n){e(r)?t(null,1):r?t(r):t(null,n.account_data.Sequence)}var t=\"function\"==typeof t?t:function(){};return this.getInfo(r),this},n.prototype.lines=function(t){function e(e,n){e?t(e):(r._lines=n.lines,r.emit(\"lines\",r._lines),t(null,n))}var r=this,t=\"function\"==typeof t?t:function(){};return this._remote.requestAccountLines({account:this._account_id},e),this},n.prototype.line=function(t,e,r){var n=this,r=\"function\"==typeof r?r:function(){};return n.lines(function(n,i){if(n)return r(n);var o;t:for(var s=0;s<i.lines.length;s++){var a=i.lines[s];if(a.account===e&&a.currency===t){o=a;break t}}r(null,o)}),this},n.prototype.notify=n.prototype.notifyTx=function(t){if(this._subs){this.emit(\"transaction\",t);var e=t.transaction.Account;if(e){var r=e===this._account_id;this.emit(r?\"transaction-outbound\":\"transaction-inbound\",t)}}},n.prototype.submit=function(t){this._transactionManager.submit(t)},n.prototype.publicKeyIsActive=function(t,e){function r(t){a.getInfo(function(e,r){e&&e.remote&&\"actNotFound\"===e.remote.error?t(null,null):t(e,r)})}function o(t,e){if(!t)return void(s===a._account_id?e(null,!0):e(null,!1));var r=t.account_data;r.RegularKey&&r.RegularKey===s?e(null,!0):r.Account===s&&0===(1048576&r.Flags)?e(null,!0):e(null,!1)}var s,a=this;try{s=n._publicKeyToAddress(t)}catch(u){return e(u)}var c=[r,o];i.waterfall(c,e)},n._publicKeyToAddress=function(t){function e(t){var e=f.codec.hex.toBits(t),r=f.hash.ripemd160.hash(f.hash.sha256.hash(e)),n=u.from_bits(r);return n.set_version(h.VER_ACCOUNT_ID),n.to_json()}if(u.is_valid(t))return t;if(/^[0-9a-fA-F]+$/.test(t))return e(t);throw new Error(\"Public key is invalid. Must be a UInt160 or a hex string\")},e.Account=n},function(t,e,r){function n(t){o.call(this);var e=this,r=\"object\"==typeof t;this.remote=t,this.tx_json={Flags:0},this._secret=void 0,this._build_path=!1,this._maxFee=r?this.remote.max_fee:void 0,this.state=\"unsubmitted\",this.finalized=!1,this.previousSigningHash=void 0,this.submitIndex=void 0,this.canonical=r?this.remote.canonical_signing:!0,this.submittedIDs=[],this.attempts=0,this.submissions=0,this.responses=0,this.once(\"success\",function(t){e.setState(\"validated\"),e.finalize(t),e._successHandler&&e._successHandler(t)}),this.once(\"error\",function(t){e.setState(\"failed\"),e.finalize(t),e._errorHandler&&e._errorHandler(t)}),this.once(\"submitted\",function(){e.setState(\"submitted\")}),this.once(\"proposed\",function(){e.setState(\"pending\")})}var i=r(40),o=(r(41),r(39).EventEmitter),s=r(17),a=r(17).sjcl,u=r(3).Amount,c=r(3).Currency,f=r(3).UInt160,h=r(11).Seed,l=r(13).SerializedObject,p=r(14).RippleError,d=r(28),_=r(25),y=r(29).internal.sub(\"transaction\");i.inherits(n,o),n.fee_units={\"default\":10},n.flags={Universal:{FullyCanonicalSig:2147483648},AccountSet:{RequireDestTag:65536,OptionalDestTag:131072,RequireAuth:262144,OptionalAuth:524288,DisallowXRP:1048576,AllowXRP:2097152},TrustSet:{SetAuth:65536,NoRipple:131072,SetNoRipple:131072,ClearNoRipple:262144,SetFreeze:1048576,ClearFreeze:2097152},OfferCreate:{Passive:65536,ImmediateOrCancel:131072,FillOrKill:262144,Sell:524288},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},n.set_clear_flags={AccountSet:{asfRequireDest:1,asfRequireAuth:2,asfDisallowXRP:3,asfDisableMaster:4,asfAccountTxnID:5,asfNoFreeze:6,asfGlobalFreeze:7,asfDefaultRipple:8}},n.MEMO_TYPES={},n.ASCII_REGEX=/^[\\x00-\\x7F]*$/,n.formats=r(16).tx,n.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},n.prototype.isTelLocal=function(t){return t>=this.consts.telLOCAL_ERROR&&t<this.consts.temMALFORMED},n.prototype.isTemMalformed=function(t){return t>=this.consts.temMALFORMED&&t<this.consts.tefFAILURE},n.prototype.isTefFailure=function(t){return t>=this.consts.tefFAILURE&&t<this.consts.terRETRY},n.prototype.isTerRetry=function(t){return t>=this.consts.terRETRY&&t<this.consts.tesSUCCESS},n.prototype.isTepSuccess=function(t){return t>=this.consts.tesSUCCESS},n.prototype.isTecClaimed=function(t){return t>=this.consts.tecCLAIMED},n.prototype.isRejected=function(t){return this.isTelLocal(t)||this.isTemMalformed(t)||this.isTefFailure(t)},n.from_json=function(t){return(new n).parseJson(t)},n.prototype.parseJson=function(t){return this.tx_json=t,this},n.prototype.setState=function(t){this.state!==t&&(this.state=t,this.emit(\"state\",t))},n.prototype.finalize=function(t){return this.finalized=!0,this.result?(this.result.ledger_index=t.ledger_index,this.result.ledger_hash=t.ledger_hash):(this.result=t,this.result.tx_json=this.tx_json),this.emit(\"cleanup\"),this.emit(\"final\",t),this.remote&&this.remote.trace&&y.info(\"transaction finalized:\",this.tx_json,this.getManager()._pending.getLength()),this},n.prototype.getAccount=function(){return this.tx_json.Account},n.prototype.getTransactionType=function(){return this.tx_json.TransactionType},n.prototype.getManager=function(t){return this.remote?(t||(t=this.tx_json.Account),this.remote.account(t)._transactionManager):void 0},n.prototype.getSecret=n.prototype._accountSecret=function(t){return this.remote?(t||(t=this.tx_json.Account),this.remote.secrets[t]):void 0},n.prototype._getFeeUnits=n.prototype.feeUnits=function(){return n.fee_units[\"default\"]},n.prototype._computeFee=function(){if(!this.remote)return void 0;for(var t=this.remote._servers,e=[],r=0;r<t.length;r++){var n=t[r];n._connected&&e.push(Number(n._computeFee(this._getFeeUnits())))}switch(e.length){case 0:return;case 1:return String(e[0])}e.sort(function(t,e){return t>e?1:e>t?-1:0});var i=Math.floor(e.length/2),o=e.length%2===0?Math.floor(.5+(e[i]+e[i-1])/2):e[i];return String(o)},n.prototype.complete=function(){if(this.remote&&!this.remote.trusted&&!this.remote.local_signing)return this.emit(\"error\",new p(\"tejServerUntrusted\",\"Attempt to give secret to untrusted server\")),!1;if(!this._secret&&!(this._secret=this.getSecret()))return this.emit(\"error\",new p(\"tejSecretUnknown\",\"Missing secret\")),!1;if(\"undefined\"==typeof this.tx_json.SigningPubKey)try{var t=h.from_json(this._secret),e=t.get_key(this.tx_json.Account);this.tx_json.SigningPubKey=e.to_hex_pub()}catch(r){return this.emit(\"error\",new p(\"tejSecretInvalid\",\"Invalid secret\")),!1}return!this.remote||\"undefined\"!=typeof this.tx_json.Fee||!this.remote.local_fee&&this.remote.trusted||(this.tx_json.Fee=this._computeFee())?Number(this.tx_json.Fee)>this._maxFee?(this.emit(\"error\",new p(\"tejMaxFeeExceeded\",\"Max fee exceeded\")),!1):(this.remote&&this.remote.local_signing&&this.canonical&&(this.tx_json.Flags|=n.flags.Universal.FullyCanonicalSig,this.tx_json.Flags=this.tx_json.Flags>>>0),this.tx_json):(this.emit(\"error\",new p(\"tejUnconnected\")),!1)},n.prototype.serialize=function(){return l.from_json(this.tx_json)},n.prototype.signingHash=function(){return this.hash(_.testnet?\"HASH_TX_SIGN_TESTNET\":\"HASH_TX_SIGN\")},n.prototype.hash=function(t,e,r){if(\"string\"==typeof t){if(\"undefined\"==typeof d[t])throw new Error(\"Unknown hashing prefix requested.\");t=d[t]}else t||(t=d.HASH_TX_ID);var n=(r||this.serialize()).hash(t);return e?n:n.to_hex()},n.prototype.sign=function(){var t=h.from_json(this._secret),e=this.tx_json.TxnSignature;delete this.tx_json.TxnSignature;var r=this.signingHash();if(e&&r===this.previousSigningHash)return this.tx_json.TxnSignature=e,this;var n=t.get_key(this.tx_json.Account),i=n.sign(r,0),o=a.codec.hex.fromBits(i).toUpperCase();return this.tx_json.TxnSignature=o,this.previousSigningHash=r,this},n.prototype.addId=function(t){-1===this.submittedIDs.indexOf(t)&&this.submittedIDs.unshift(t)},n.prototype.findId=function(t){for(var e,r=0;r<this.submittedIDs.length;r++){var n=this.submittedIDs[r];if(e=t[n])break}return e},n.prototype.setBuildPath=n.prototype.buildPath=function(t){return this._build_path=t,this},n.prototype.sourceTag=function(t){return\"number\"==typeof t&&isFinite(t)&&(this.tx_json.SourceTag=t),this},n.prototype.setDestinationTag=n.prototype.destinationTag=function(t){return\"number\"==typeof t&&isFinite(t)&&(this.tx_json.DestinationTag=t),this},n.prototype.setInvoiceID=n.prototype.invoiceID=function(t){if(\"string\"==typeof t){for(;t.length<64;)t+=\"0\";this.tx_json.InvoiceID=t}return this},n.prototype.setClientID=n.prototype.clientID=function(t){return\"string\"==typeof t&&(this._clientID=t),this},n.prototype.setLastLedger=n.prototype.lastLedger=function(t){return\"number\"==typeof t&&isFinite(t)&&(this._setLastLedger=!0,this.tx_json.LastLedgerSequence=t),this},n.prototype.maxFee=function(t){return\"number\"==typeof t&&t>=0&&(this._setMaxFee=!0,this._maxFee=t),this},n.prototype.setFixedFee=function(t){return\"number\"==typeof t&&t>=0&&(this._setFixedFee=!0,this.tx_json.Fee=String(t)),this},n._rewritePath=function(t){if(!Array.isArray(t))throw new Error(\"Path must be an array\");var e=t.map(function(t){var e={};return t.hasOwnProperty(\"account\")&&(e.account=f.json_rewrite(t.account)),t.hasOwnProperty(\"issuer\")&&(e.issuer=f.json_rewrite(t.issuer)),t.hasOwnProperty(\"currency\")&&(e.currency=c.json_rewrite(t.currency)),t.hasOwnProperty(\"type_hex\")&&(e.type_hex=t.type_hex),e});return e},n.prototype.addPath=n.prototype.pathAdd=function(t){return Array.isArray(t)&&(this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(n._rewritePath(t))),this},n.prototype.setPaths=n.prototype.paths=function(t){if(Array.isArray(t))for(var e=0,r=t.length;r>e;e++)this.addPath(t[e]);return this},n.prototype.setSecret=n.prototype.secret=function(t){return\"string\"==typeof t&&(this._secret=t),this},n.prototype.setSendMax=n.prototype.sendMax=function(t){return t&&(this.tx_json.SendMax=u.json_rewrite(t)),this},n.prototype.transferRate=function(t){return\"number\"==typeof t&&t>=1e9&&(this.tx_json.TransferRate=t),this},n.prototype.setFlags=function(t){if(void 0===t)return this;if(\"number\"==typeof t)return this.tx_json.Flags=t,this;for(var e=n.flags[this.getTransactionType()]||{},r=Array.isArray(t)?t:[].slice.call(arguments),i=0,o=r.length;o>i;i++){var s=r[i];if(!e.hasOwnProperty(s))return this.emit(\"error\",new p(\"tejInvalidFlag\"));this.tx_json.Flags+=e[s]}return this},n.prototype.addMemo=function(t,e,r){function i(t){var e=a.codec.utf8String.toBits(t);return a.codec.hex.fromBits(e).toUpperCase()}if(\"object\"==typeof t){var o=t;t=o.memoType,e=o.memoFormat,r=o.memoData}if(!/(undefined|string)/.test(typeof t))throw new Error(\"MemoType must be a string\");if(!n.ASCII_REGEX.test(t))throw new Error(\"MemoType must be valid ASCII\");if(!/(undefined|string)/.test(typeof e))throw new Error(\"MemoFormat must be a string\");if(!n.ASCII_REGEX.test(e))throw new Error(\"MemoFormat must be valid ASCII\");var s={};if(t&&(n.MEMO_TYPES[t]&&(t=n.MEMO_TYPES[t]),s.MemoType=i(t)),e&&(s.MemoFormat=i(e)),r){if(\"string\"!=typeof r){if(\"json\"!==e)throw new Error(\"MemoData can only be a JSON object with a valid json MemoFormat\");try{r=JSON.stringify(r)}catch(u){throw new Error(\"MemoFormat json with invalid JSON in MemoData field\")}}s.MemoData=i(r)}return this.tx_json.Memos=(this.tx_json.Memos||[]).concat({Memo:s}),this},n.prototype.setAccountTxnID=n.prototype.accountTxnID=function(t){return\"string\"==typeof t&&(this.tx_json.AccountTxnID=t),this},n.prototype.accountSet=function(t,e,r){function i(t){return\"number\"==typeof t?t:s[t]||s[\"asf\"+t]}if(\"object\"==typeof t){var o=t;t=o.source||o.from||o.account,e=o.set_flag||o.set,r=o.clear_flag||o.clear}if(!f.is_valid(t))throw new Error(\"Source address invalid\");this.tx_json.TransactionType=\"AccountSet\",this.tx_json.Account=f.json_rewrite(t);var s=n.set_clear_flags.AccountSet;return e&&(e=i(e))&&(this.tx_json.SetFlag=e),r&&(r=i(r))&&(this.tx_json.ClearFlag=r),this},n.prototype.claim=function(t,e,r,n){if(\"object\"==typeof t){var i=t;n=i.signature,r=i.public_key,e=i.generator,t=i.source||i.from||i.account}return this.tx_json.TransactionType=\"Claim\",this.tx_json.Generator=e,this.tx_json.PublicKey=r,this.tx_json.Signature=n,this},n.prototype.offerCancel=function(t,e){if(\"object\"==typeof t){var r=t;e=r.sequence,t=r.source||r.from||r.account}if(!f.is_valid(t))throw new Error(\"Source address invalid\");return this.tx_json.TransactionType=\"OfferCancel\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.OfferSequence=Number(e),this},n.prototype.offerCreate=function(t,e,r,n,i){if(\"object\"==typeof t){var o=t;i=o.cancel_sequence||o.sequence,n=o.expiration,r=o.taker_gets||o.sell,e=o.taker_pays||o.buy,t=o.source||o.from||o.account}if(!f.is_valid(t))throw new Error(\"Source address invalid\");return this.tx_json.TransactionType=\"OfferCreate\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.TakerPays=u.json_rewrite(e),this.tx_json.TakerGets=u.json_rewrite(r),n&&(this.tx_json.Expiration=s.time.toRipple(n)),i&&(this.tx_json.OfferSequence=Number(i)),this},n.prototype.setRegularKey=function(t,e){if(\"object\"==typeof t){var r=t;t=r.address||r.account||r.from,e=r.regular_key}if(!f.is_valid(t))throw new Error(\"Source address invalid\");if(!f.is_valid(e))throw new Error(\"RegularKey must be a valid Ripple Address\");return this.tx_json.TransactionType=\"SetRegularKey\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.RegularKey=f.json_rewrite(e),this},n.prototype.payment=function(t,e,r){if(\"object\"==typeof t){var n=t;r=n.amount,e=n.destination||n.to,t=n.source||n.from||n.account}if(!f.is_valid(t))throw new Error(\"Payment source address invalid\");if(!f.is_valid(e))throw new Error(\"Payment destination address invalid\");return this.tx_json.TransactionType=\"Payment\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.Amount=u.json_rewrite(r),this.tx_json.Destination=f.json_rewrite(e),this},n.prototype.trustSet=n.prototype.rippleLineSet=function(t,e,r,n){if(\"object\"==typeof t){var i=t;n=i.quality_out,r=i.quality_in,e=i.limit,t=i.source||i.from||i.account}if(!f.is_valid(t))throw new Error(\"Source address invalid\");return this.tx_json.TransactionType=\"TrustSet\",this.tx_json.Account=f.json_rewrite(t),void 0!==e&&(this.tx_json.LimitAmount=u.json_rewrite(e)),r&&(this.tx_json.QualityIn=r),n&&(this.tx_json.QualityOut=n),this},n.prototype.submit=function(t){var e=this;return this.callback=\"function\"==typeof t?t:function(){},this._errorHandler=function(t,r){t instanceof p||(t=new p(t,r)),e.callback(t)},this._successHandler=function(t){e.callback(null,t)},this.remote?(this.getManager().submit(this),this):void this.emit(\"error\",new Error(\"No remote found\"))},n.prototype.abort=function(){this.finalized||this.emit(\"error\",new p(\"tejAbort\",\"Transaction aborted\"))},n.prototype.summary=function(){var t={tx_json:this.tx_json,clientID:this._clientID,submittedIDs:this.submittedIDs,submissionAttempts:this.attempts,submitIndex:this.submitIndex,initialSubmitIndex:this.initialSubmitIndex,lastLedgerSequence:this.lastLedgerSequence,state:this.state,server:this._server?this._server._opts.url:void 0,finalized:this.finalized};return this.result&&(t.result={engine_result:this.result.engine_result,engine_result_message:this.result.engine_result_message,ledger_hash:this.result.ledger_hash,ledger_index:this.result.ledger_index,transaction_hash:this.result.tx_json.hash}),t},e.Transaction=n},function(t,e,r){\"use strict\";var n=r(46),i=r(9).UInt160,o=r(17),s=r(31).Float,a=n(function(){this._value=0/0,this._update()},i);a.prototype=n({},i.prototype),a.prototype.constructor=a,a.HEX_CURRENCY_BAD=\"0000000000000000000000005852500000000000\",a.prototype.human_RE=/^\\s*([a-zA-Z0-9\\<\\>\\(\\)\\{\\}\\[\\]\\|\\?\\!\\@\\#\\$\\%\\^\\&]{3})(\\s*-\\s*[- \\w]+)?(\\s*\\(-?\\d+\\.?\\d*%pa\\))?\\s*$/,a.from_json=function(t,e){return(new a).parse_json(t,e)},a.from_human=function(t,e){return(new a).parse_human(t,e)},a.prototype.parse_json=function(t,e){if(this._value=0/0,t instanceof a)return this._value=t.copyTo({})._value,this._update(),this;switch(typeof t){case\"number\":isNaN(t)||this.parse_number(t);break;case\"string\":if(!t||\"0\"===t){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}if(\"1\"===t){this.parse_hex(a.HEX_ONE);break}if(/^[A-F0-9]{40}$/.test(t)){this.parse_hex(t);break}var r=t.match(this.human_RE);if(r){var n=r[1];if(!n||/^(0|XRP)$/.test(n)){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}var i=r[3]||\"\",u=i.match(/(-?\\d+\\.?\\d+)/);n=n.toUpperCase();var c=o.arraySet(20,0);if(u){c[0]=1,c[1]=255&n.charCodeAt(0),c[2]=255&n.charCodeAt(1),c[3]=255&n.charCodeAt(2),u=parseFloat(u[0]);for(var f=31536e3,h=f/Math.log(1+u/100),l=s.toIEEE754Double(h),p=0;p<=l.length;p++)c[8+p]=255&l[p]}else c[12]=255&n.charCodeAt(0),c[13]=255&n.charCodeAt(1),c[14]=255&n.charCodeAt(2);this.parse_bytes(c)}}return this},a.prototype.parse_human=function(t){return this.parse_json(t)},a.prototype._update=function(){var t=this.to_bytes(),e=!0;if(t){this._native=!1,this._type=-1,this._interest_start=0/0,this._interest_period=0/0,this._iso_code=\"\";for(var r=0;20>r;r++)e=e&&(12===r||13===r||14===r||0===t[r]);e?(this._iso_code=String.fromCharCode(t[12])+String.fromCharCode(t[13])+String.fromCharCode(t[14]),\"\\x00\\x00\\x00\"===this._iso_code&&(this._native=!0,this._iso_code=\"XRP\"),this._type=0):1===t[0]&&(this._iso_code=String.fromCharCode(t[1])+String.fromCharCode(t[2])+String.fromCharCode(t[3]),this._type=1,this._interest_start=(t[4]<<24)+(t[5]<<16)+(t[6]<<8)+t[7],this._interest_period=s.fromIEEE754Double(t.slice(8,16)))}},a.prototype.is_native=function(){return this._native},a.prototype.has_interest=function(){return 1===this._type&&!isNaN(this._interest_start)&&!isNaN(this._interest_period)},a.prototype.get_interest_at=function(t){return this.has_interest()?(t||(t=this._interest_start+31536e3),t instanceof Date&&(t=o.fromTimestamp(t.getTime())),Math.exp((t-this._interest_start)/this._interest_period)):0},a.prototype.get_interest_percentage_at=function(t,e){var r=this.get_interest_at(t,e);r=100*r-100;var n=e?Math.pow(10,e):100;return Math.round(r*n)/n},a.prototype.to_json=function(t){if(!this.is_valid())return\"XRP\";t||(t={});var e,r=t&&t.full_name?\" - \"+t.full_name:\"\";if(t.show_interest=void 0!==t.show_interest?t.show_interest:this.has_interest(),!t.force_hex&&/^[A-Z0-9]{3}$/.test(this._iso_code)){if(e=this._iso_code+r,t.show_interest){var n=isNaN(t.decimals)?void 0:t.decimals,i=this.has_interest()?this.get_interest_percentage_at(this._interest_start+31536e3,n):0;","",""]},{"start":{"row":13,"column":0},"end":{"row":14,"column":0},"action":"insert","lines":["/node_modules/ripple-lib/build/ripple-0.12.2.js:",""]},{"start":{"row":14,"column":0},"end":{"row":16,"column":0},"action":"insert","lines":["\t4315: \t        self._remote.request_subscribe()","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":19,"column":0},"action":"insert","lines":["/node_modules/ripple-lib/src/js/ripple/account.js:","\t46:         self._remote.request_subscribe()","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":0},"end":{"row":22,"column":0},"action":"insert","lines":["/node_modules/ripple-lib/test/transaction-manager-test.js:","\t73:     rippled.on('request_subscribe', function(message, c) {","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":0},"end":{"row":23,"column":0},"action":"insert","lines":["Found 8 matches in 6 files ",""]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["",""]},{"start":{"row":0,"column":39},"end":{"row":0,"column":68},"action":"insert","lines":[" (Found 8 matches in 6 files)"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":9},"action":"remove","lines":["Searching"]},{"start":{"row":0,"column":1},"end":{"row":24,"column":0},"action":"remove","lines":["for \u0001request_subscribe\u0001 in\u0001/\u0001 (Found 8 matches in 6 files)","","/connect_to_ripple.js:","\t32:                 request_subscribe(accounts)","\t42: function request_subscribe(accounts){","\t47: var req = remote.request_subscribe();","","/node_modules/ripple-lib/build/ripple-0.12.2-debug.js:","\t72: \teval(\"// Routines for working with an account.\\n//\\n// You should not instantiate this class yourself, instead use Remote#account.\\n//\\n// Events:\\n//   wallet_clean :  True, iff the wallet has been updated.\\n//   wallet_dirty :  True, iff the wallet needs to be updated.\\n//   balance:        The current stamp balance.\\n//   balance_proposed\\n//\\n\\n// var network = require('./network.js');\\nvar async              = __webpack_require__(47);\\nvar util               = __webpack_require__(41);\\nvar extend             = __webpack_require__(46);\\nvar EventEmitter       = __webpack_require__(39).EventEmitter;\\nvar Amount             = __webpack_require__(3).Amount;\\nvar UInt160            = __webpack_require__(9).UInt160;\\nvar TransactionManager = __webpack_require__(30).TransactionManager;\\nvar sjcl               = __webpack_require__(17).sjcl;\\nvar Base               = __webpack_require__(7).Base;\\n\\n/**\\n * @constructor Account\\n * @param {Remote} remote\\n * @param {String} account\\n */\\n\\nfunction Account(remote, account) {\\n  EventEmitter.call(this);\\n\\n  var self = this;\\n\\n  this._remote = remote;\\n  this._account = UInt160.from_json(account);\\n  this._account_id = this._account.to_json();\\n  this._subs = 0;\\n\\n  // Ledger entry object\\n  // Important: This must never be overwritten, only extend()-ed\\n  this._entry = { };\\n\\n  function listenerAdded(type, listener) {\\n    if (~Account.subscribeEvents.indexOf(type)) {\\n      if (!self._subs && self._remote._connected) {\\n        self._remote.request_subscribe()\\n        .add_account(self._account_id)\\n        .broadcast().request();\\n      }\\n      self._subs += 1;\\n    }\\n  };\\n\\n  this.on('newListener', listenerAdded);\\n\\n  function listenerRemoved(type, listener) {\\n    if (~Account.subscribeEvents.indexOf(type)) {\\n      self._subs -= 1;\\n      if (!self._subs && self._remote._connected) {\\n        self._remote.request_unsubscribe()\\n        .add_account(self._account_id)\\n        .broadcast().request();\\n      }\\n    }\\n  };\\n\\n  this.on('removeListener', listenerRemoved);\\n\\n  function attachAccount(request) {\\n    if (self._account.is_valid() && self._subs) {\\n      request.add_account(self._account_id);\\n    }\\n  };\\n\\n  this._remote.on('prepare_subscribe', attachAccount);\\n\\n  function handleTransaction(transaction) {\\n    if (!transaction.mmeta) {\\n      return;\\n    }\\n\\n    var changed = false;\\n\\n    transaction.mmeta.each(function(an) {\\n      var isAccount = an.fields.Account === self._account_id;\\n      var isAccountRoot = isAccount && (an.entryType === 'AccountRoot');\\n\\n      if (isAccountRoot) {\\n        extend(self._entry, an.fieldsNew, an.fieldsFinal);\\n        changed = true;\\n      }\\n    });\\n\\n    if (changed) {\\n      self.emit('entry', self._entry);\\n    }\\n  };\\n\\n  this.on('transaction', handleTransaction);\\n\\n  this._transactionManager = new TransactionManager(this);\\n\\n  return this;\\n};\\n\\nutil.inherits(Account, EventEmitter);\\n\\n/**\\n * List of events that require a remote subscription to the account.\\n */\\n\\nAccount.subscribeEvents = [ 'transaction', 'entry' ];\\n\\nAccount.prototype.toJson = function() {\\n  return this._account.to_json();\\n};\\n\\n/**\\n * Whether the AccountId is valid.\\n *\\n * Note: This does not tell you whether the account exists in the ledger.\\n */\\n\\nAccount.prototype.isValid = function() {\\n  return this._account.is_valid();\\n};\\n\\n/**\\n * Request account info\\n *\\n * @param {Function} callback\\n */\\n\\nAccount.prototype.getInfo = function(callback) {\\n  return this._remote.requestAccountInfo({account: this._account_id}, callback);\\n};\\n\\n/**\\n * Retrieve the current AccountRoot entry.\\n *\\n * To keep up-to-date with changes to the AccountRoot entry, subscribe to the\\n * 'entry' event.\\n *\\n * @param {Function} callback\\n */\\n\\nAccount.prototype.entry = function(callback) {\\n  var self = this;\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  function accountInfo(err, info) {\\n    if (err) {\\n      callback(err);\\n    } else {\\n      extend(self._entry, info.account_data);\\n      self.emit('entry', self._entry);\\n      callback(null, info);\\n    }\\n  };\\n\\n  this.getInfo(accountInfo);\\n\\n  return this;\\n};\\n\\nAccount.prototype.getNextSequence = function(callback) {\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  function isNotFound(err) {\\n    return err && typeof err === 'object'\\n    && typeof err.remote === 'object'\\n    && err.remote.error === 'actNotFound';\\n  };\\n\\n  function accountInfo(err, info) {\\n    if (isNotFound(err)) {\\n      // New accounts will start out as sequence one\\n      callback(null, 1);\\n    } else if (err) {\\n      callback(err);\\n    } else {\\n      callback(null, info.account_data.Sequence);\\n    }\\n  };\\n\\n  this.getInfo(accountInfo);\\n\\n  return this;\\n};\\n\\n/**\\n * Retrieve this account's Ripple trust lines.\\n *\\n * To keep up-to-date with changes to the AccountRoot entry, subscribe to the\\n * 'lines' event. (Not yet implemented.)\\n *\\n * @param {function(err, lines)} callback Called with the result\\n */\\n\\nAccount.prototype.lines = function(callback) {\\n  var self = this;\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  function accountLines(err, res) {\\n    if (err) {\\n      callback(err);\\n    } else {\\n      self._lines = res.lines;\\n      self.emit('lines', self._lines);\\n      callback(null, res);\\n    }\\n  }\\n\\n  this._remote.requestAccountLines({account: this._account_id}, accountLines);\\n\\n  return this;\\n};\\n\\n/**\\n * Retrieve this account's single trust line.\\n *\\n * @param {string} currency Currency\\n * @param {string} address Ripple address\\n * @param {function(err, line)} callback Called with the result\\n * @returns {Account}\\n */\\n\\nAccount.prototype.line = function(currency, address, callback) {\\n  var self = this;\\n  var callback = typeof callback === 'function' ? callback : function(){};\\n\\n  self.lines(function(err, data) {\\n    if (err) {\\n      return callback(err);\\n    }\\n\\n    var line;\\n\\n    top:\\n    for (var i=0; i<data.lines.length; i++) {\\n      var l = data.lines[i];\\n      if (l.account === address && l.currency === currency) {\\n        line = l;\\n        break top;\\n      }\\n    }\\n\\n    callback(null, line);\\n  });\\n\\n  return this;\\n};\\n\\n/**\\n * Notify object of a relevant transaction.\\n *\\n * This is only meant to be called by the Remote class. You should never have to\\n * call this yourself.\\n *\\n * @param {Object} message\\n */\\n\\nAccount.prototype.notify =\\nAccount.prototype.notifyTx = function(transaction) {\\n  // Only trigger the event if the account object is actually\\n  // subscribed - this prevents some weird phantom events from\\n  // occurring.\\n  if (!this._subs) {\\n    return;\\n  }\\n\\n  this.emit('transaction', transaction);\\n\\n  var account = transaction.transaction.Account;\\n\\n  if (!account) {\\n    return;\\n  }\\n\\n  var isThisAccount = (account === this._account_id);\\n\\n  this.emit(isThisAccount ? 'transaction-outbound' : 'transaction-inbound', transaction);\\n};\\n\\n/**\\n * Submit a transaction to an account's\\n * transaction manager\\n *\\n * @param {Transaction} transaction\\n */\\n\\nAccount.prototype.submit = function(transaction) {\\n  this._transactionManager.submit(transaction);\\n};\\n\\n\\n/**\\n *  Check whether the given public key is valid for this account\\n *\\n *  @param {Hex-encoded String|RippleAddress} public_key\\n *  @param {Function} callback\\n *\\n *  @callback\\n *  @param {Error} err\\n *  @param {Boolean} true if the public key is valid and active, false otherwise\\n */\\nAccount.prototype.publicKeyIsActive = function(public_key, callback) {\\n  var self = this;\\n  var public_key_as_uint160;\\n\\n  try {\\n    public_key_as_uint160 = Account._publicKeyToAddress(public_key);\\n  } catch (err) {\\n    return callback(err);\\n  }\\n\\n  function getAccountInfo(async_callback) {\\n    self.getInfo(function(err, account_info_res){\\n\\n      // If the remote responds with an Account Not Found error then the account\\n      // is unfunded and thus we can assume that the master key is active\\n      if (err && err.remote && err.remote.error === 'actNotFound') {\\n        async_callback(null, null);\\n      } else {\\n        async_callback(err, account_info_res);\\n      }\\n    });\\n  };\\n\\n  function publicKeyIsValid(account_info_res, async_callback) {\\n    // Catch the case of unfunded accounts\\n    if (!account_info_res) {\\n\\n      if (public_key_as_uint160 === self._account_id) {\\n        async_callback(null, true);\\n      } else {\\n        async_callback(null, false);\\n      }\\n\\n      return;\\n    }\\n\\n    var account_info = account_info_res.account_data;\\n\\n    // Respond with true if the RegularKey is set and matches the given public key or\\n    // if the public key matches the account address and the lsfDisableMaster is not set\\n    if (account_info.RegularKey &&\\n      account_info.RegularKey === public_key_as_uint160) {\\n      async_callback(null, true);\\n    } else if (account_info.Account === public_key_as_uint160 &&\\n      ((account_info.Flags & 0x00100000) === 0)) {\\n      async_callback(null, true);\\n    } else {\\n      async_callback(null, false);\\n    }\\n  };\\n\\n  var steps = [\\n    getAccountInfo,\\n    publicKeyIsValid\\n  ];\\n\\n  async.waterfall(steps, callback);\\n};\\n\\n/**\\n *  Convert a hex-encoded public key to a Ripple Address\\n *\\n *  @static\\n *\\n *  @param {Hex-encoded string|RippleAddress} public_key\\n *  @returns {RippleAddress}\\n */\\nAccount._publicKeyToAddress = function(public_key) {\\n  // Based on functions in /src/js/ripple/keypair.js\\n  function hexToUInt160(public_key) {\\n    var bits = sjcl.codec.hex.toBits(public_key);\\n    var hash = sjcl.hash.ripemd160.hash(sjcl.hash.sha256.hash(bits));\\n    var address = UInt160.from_bits(hash);\\n    address.set_version(Base.VER_ACCOUNT_ID);\\n\\n    return address.to_json();\\n  };\\n\\n  if (UInt160.is_valid(public_key)) {\\n    return public_key;\\n  } else if (/^[0-9a-fA-F]+$/.test(public_key)) {\\n    return hexToUInt160(public_key);\\n  } else {\\n    throw new Error('Public key is invalid. Must be a UInt160 or a hex string');\\n  }\\n};\\n\\nexports.Account = Account;\\n\\n// vim:sw=2:sts=2:ts=8:et\\n\\n\\n/*****************\\n ** WEBPACK FOOTER\\n ** ./src/js/ripple/account.js\\n ** module id = 4\\n ** module chunks = 0\\n **/\\n//# sourceURL=webpack:///./src/js/ripple/account.js?\");","","/node_modules/ripple-lib/build/ripple-0.12.2-min.js:","\t2: return this.message[n]=(this.message[n]||[]).concat(r),this},n.prototype.setAccountsProposed=n.prototype.rtAccounts=n.prototype.accountsProposed=function(t){return this.accounts(t,!0)},n.prototype.addAccountProposed=function(t){return Array.isArray(t)?(t.forEach(this.addAccountProposed,this),this):this.addAccount(t,!0)},n.prototype.setBooks=n.prototype.books=function(t,e){this.message.books=[];for(var r=0,n=t.length;n>r;r++){var i=t[r];this.addBook(i,e)}return this},n.prototype.addBook=function(t,e){function r(e){if(!t[e])throw new Error(\"Missing \"+e);var r=n[e]={currency:u.json_rewrite(t[e].currency,{force_hex:!0})};u.from_json(r.currency).is_native()||(r.issuer=a.json_rewrite(t[e].issuer))}if(Array.isArray(t))return t.forEach(this.addBook,this),this;var n={};return[\"taker_gets\",\"taker_pays\"].forEach(r),\"boolean\"!=typeof e?n.snapshot=!0:e?n.snapshot=!0:delete n.snapshot,t.both&&(n.both=!0),this.message.books=(this.message.books||[]).concat(n),this},n.prototype.addStream=function(t,e){if(Array.isArray(e))switch(t){case\"accounts\":this.addAccount(e);break;case\"accounts_proposed\":this.addAccountProposed(e);break;case\"books\":this.addBook(e)}else if(arguments.length>1){for(arg in arguments)this.addStream(arguments[arg]);return}return Array.isArray(this.message.streams)||(this.message.streams=[]),-1===this.message.streams.indexOf(t)&&this.message.streams.push(t),this},e.Request=n},function(t,e,r){\"use strict\";function n(t){return new l(t).toPower(-1)}function i(){this._value=new l(0/0),this._is_native=!0,this._currency=new f,this._issuer=new u}var o=r(41),s=r(46),a=r(17),u=r(9).UInt160,c=r(11).Seed,f=r(6).Currency,h=r(49),l=h.another({ROUNDING_MODE:h.ROUND_HALF_UP,DECIMAL_PLACES:40});i.strict_mode=!0;var p={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new l(5),bi_7:new l(7),bi_10:new l(10),bi_1e14:new l(1e14),bi_1e16:new l(1e16),bi_1e17:new l(1e17),bi_1e32:new l(1e32),bi_man_max_value:new l(\"9999999999999999\"),bi_man_min_value:new l(1e15),bi_xns_max:new l(1e17),bi_xns_min:new l(-1e17),bi_xns_unit:new l(1e6),cMinOffset:-96,cMaxOffset:80,max_value:\"9999999999999999e80\",min_value:\"-1000000000000000e-96\"},d=new l(1e11),_=new l(p.max_value),y=new l(p.min_value).abs();s(i,p),e.consts=p,i.text_full_rewrite=function(t){return i.from_json(t).to_text_full()},i.json_rewrite=function(t){return i.from_json(t).to_json()},i.from_number=function(t){return(new i).parse_number(t)},i.from_json=function(t){return(new i).parse_json(t)},i.from_quality=function(t,e,r,n){return(new i).parse_quality(t,e,r,n)},i.from_human=function(t,e){return(new i).parse_human(t,e)},i.is_valid=function(t){return i.from_json(t).is_valid()},i.is_valid_full=function(t){return i.from_json(t).is_valid_full()},i.NaN=function(){var t=new i;return t._value=new l(0/0),t},i.prototype._set_value=function(t,e){o(t instanceof l),this._value=t.isZero()&&t.isNegative()?t.negated():t,this.canonicalize(e),this._check_limits()},i.prototype.abs=function(){return this.clone(this.is_negative())},i.prototype.add=function(t){var e=i.from_json(t);return this.is_comparable(e)?this._copy(this._value.plus(e._value)):new i(0/0)},i.prototype.subtract=function(t){return this.add(i.from_json(t).negate())},i.prototype.multiply=function(t){var e=i.from_json(t),r=e.is_native()?e._value.times(i.bi_xns_unit):e._value;return this._copy(this._value.times(r))},i.prototype.divide=function(t){var e=i.from_json(t);if(!this.is_valid())throw new Error(\"Invalid dividend\");if(!e.is_valid())throw new Error(\"Invalid divisor\");if(e.is_zero())throw new Error(\"divide by zero\");var r=e.is_native()?e._value.times(i.bi_xns_unit):e._value;return this._copy(this._value.dividedBy(r))},i.prototype.ratio_human=function(t,e){e=s({},e);var r=this.clone();return t=i.from_json(t),r.is_valid()&&t.is_valid()?t.is_zero()?new i(0/0):(e.reference_date&&(t=t.applyInterest(e.reference_date)),t._is_native&&r._set_value(r._value.times(i.bi_xns_unit)),r.divide(t)):new i(0/0)},i.prototype.product_human=function(t,e){if(e=e||{},t=i.from_json(t),!this.is_valid()||!t.is_valid())return new i(0/0);e.reference_date&&(t=t.applyInterest(e.reference_date));var r=this.multiply(t);return t._is_native&&r._set_value(r._value.dividedBy(i.bi_xns_unit)),r},i.prototype._invert=function(){return this._set_value(n(this._value)),this},i.prototype.invert=function(){return this.clone()._invert()},i.prototype.canonicalize=function(t){this._value=this._is_native?this._value.round(6,l.ROUND_DOWN):new l(t?this._value.toPrecision(16,t):this._value.toPrecision(16))},i.prototype._check_limits=function(){if(!i.strict_mode)return this;if(this._value.isNaN()||this._value.isZero())return this;var t=this._value.absoluteValue();if(this._is_native){if(t.greaterThan(d))throw new Error(\"Exceeding max value of \"+d.toString())}else{if(t.lessThan(y))throw new Error(\"Exceeding min value of \"+y.toString());if(t.greaterThan(_))throw new Error(\"Exceeding max value of \"+_.toString())}return this},i.prototype.clone=function(t){return this.copyTo(new i,t)},i.prototype._copy=function(t){var e=this.clone();return e._set_value(t),e},i.prototype.compareTo=function(t){var e=i.from_json(t);return this.is_comparable(e)?this._value.comparedTo(e._value):new i(0/0)},i.prototype.copyTo=function(t,e){return t._value=e?this._value.negated():this._value,t._is_native=this._is_native,t._currency=this._currency,t._issuer=this._issuer,t},i.prototype.currency=function(){return this._currency},i.prototype.equals=function(t,e){return t instanceof i?this.is_valid()&&t.is_valid()&&this._is_native===t._is_native&&this._value.equals(t._value)&&(this._is_native||this._currency.equals(t._currency)&&(e||this._issuer.equals(t._issuer))):this.equals(i.from_json(t))},i.prototype.is_comparable=function(t){return this.is_valid()&&t.is_valid()&&this._is_native===t._is_native},i.prototype.is_native=function(){return this._is_native},i.prototype.is_negative=function(){return this._value.isNegative()},i.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},i.prototype.is_valid=function(){return!this._value.isNaN()},i.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},i.prototype.is_zero=function(){return this._value.isZero()},i.prototype.issuer=function(){return this._issuer},i.prototype.negate=function(){return this.clone(\"NEGATE\")},i.prototype.parse_human=function(t,e){function r(t){return isFinite(t)&&\"\"!==t&&null!==t}e=e||{};var n,o,s=/^[a-fA-F0-9]{40}$/,a=/^([a-zA-Z]{3}|[0-9]{3})$/,u=t.split(\" \").filter(function(t){return\"\"!==t});if(1===u.length){if(r(u[0]))n=u[0],o=\"XRP\";else if(n=u[0].slice(0,-3),o=u[0].slice(-3),!r(n)||!o.match(a))return new i(0/0)}else{if(2!==u.length)return new i(0/0);if(r(u[0])&&u[1].match(s))n=u[0],o=u[1];else if(u[0].match(a)&&r(u[1]))n=u[1],o=u[0];else{if(!r(u[0])||!u[1].match(a))return new i(0/0);n=u[0],o=u[1]}}if(o=o.toUpperCase(),this.set_currency(o),this._is_native=\"XRP\"===o,this._set_value(new l(n)),e.reference_date&&this._currency.has_interest()){var c=this._currency.get_interest_at(e.reference_date);this._set_value(this._value.dividedBy(c.toString()))}return this},i.prototype.parse_issuer=function(t){return this._issuer=u.from_json(t),this},i.prototype.parse_quality=function(t,e,r,o){o=o||{};var s=f.from_json(o.base_currency),a=t.substring(t.length-14),c=t.substring(t.length-16,t.length-14),h=new l(a,16),p=parseInt(c,16)-100,d=new l(h.toString()+\"e\"+p.toString());if(this._currency=f.from_json(e),this._issuer=u.from_json(r),this._is_native=this._currency.is_native(),this._is_native&&s.is_native())throw new Error(\"XRP/XRP quality is not allowed\");var _=o.inverse?n(d):d,y=_;if(o.xrp_as_drops||(this._is_native?y=_.div(i.bi_xns_unit):s.is_valid()&&s.is_native()&&(y=_.times(i.bi_xns_unit))),this._set_value(y),o.reference_date&&s.is_valid()&&s.has_interest()){var m=s.get_interest_at(o.reference_date);this._set_value(this._value.dividedBy(m.toString()))}return this},i.prototype.parse_number=function(t){return this._is_native=!1,this._currency=f.from_json(1),this._issuer=u.from_json(1),this._set_value(new l(t)),this},i.prototype.parse_json=function(t){switch(typeof t){case\"string\":var e=t.match(/^([^/]+)\\/([^/]+)(?:\\/(.+))?$/);e?(this._currency=f.from_json(e[2]),this._issuer=u.from_json(e[3]?e[3]:\"1\"),this.parse_value(e[1])):(this.parse_native(t),this._currency=f.from_json(\"0\"),this._issuer=u.from_json(\"0\"));break;case\"number\":this.parse_json(String(t));break;case\"object\":if(null===t)break;t instanceof i?t.copyTo(this):t.hasOwnProperty(\"value\")&&(this._currency.parse_json(t.currency,!0),\"string\"==typeof t.issuer&&this._issuer.parse_json(t.issuer),this.parse_value(t.value));break;default:this._set_value(new l(0/0))}return this},i.prototype.parse_native=function(t){if(t&&\"string\"==typeof t&&!isNaN(t)){if(t.indexOf(\".\")>=0)throw new Error(\"Native amounts must be specified in integer drops\");var e=new l(t);this._is_native=!0,this._set_value(e.dividedBy(i.bi_xns_unit))}else this._set_value(new l(0/0));return this},i.prototype.parse_value=function(t){return this._is_native=!1,this._set_value(new l(t),l.ROUND_DOWN),this},i.prototype.set_currency=function(t){return this._currency=f.from_json(t),this._is_native=this._currency.is_native(),this},i.prototype.set_issuer=function(t){return this._issuer=t instanceof u?t:u.from_json(t),this},i.prototype.to_number=function(){return Number(this.to_text())},i.prototype.to_text=function(){if(!this.is_valid())return\"NaN\";if(this._is_native)return this._value.times(i.bi_xns_unit).toString();var t=this._value.e-15,e=this._value.isNegative()?\"-\":\"\",r=a.getMantissaDecimalString(this._value.absoluteValue());if(0!==t&&(-25>t||t>-4))return e+r.toString()+\"e\"+t.toString();var n=\"000000000000000000000000000\"+r.toString()+\"00000000000000000000000\",o=n.substring(0,t+43),s=n.substring(t+43),u=o.match(/[1-9].*$/),c=s.match(/[1-9]0*$/);return e+(u?u[0]:\"0\")+(c?\".\"+s.substring(0,1+s.length-c[0].length):\"\")},i.prototype.applyInterest=function(t){if(!this._currency.has_interest())return this;var e=this._currency.get_interest_at(t);return this._copy(this._value.times(e.toString()))},i.prototype.to_human=function(t){if(t=t||{},!this.is_valid())return\"NaN\";var e=this;t.reference_date&&(e=this.applyInterest(t.reference_date));var r=e._value.isNegative(),n=e._value.abs().toFixed(),i=n.split(\".\"),o=i[0],s=2===i.length?i[1]:\"\";if(o=o.replace(/^0*/,\"\"),s=s.replace(/0*$/,\"\"),s.length||!t.skip_empty_fraction){if(\"number\"==typeof t.precision){var u=Math.max(0,t.precision);u=Math.min(u,s.length);var c=Number(\"0.\"+s).toFixed(u);for(1>c?s=c.substring(2):(o=(Number(o)+1).toString(),s=\"\");s.length<u;)s=\"0\"+s}if(\"number\"==typeof t.max_sig_digits){var f=0===Number(o),h=f?0:o.length,l=f?s.replace(/^0*/,\"\"):s;h+=l.length;var p=h-t.max_sig_digits;p=Math.max(p,0),p=Math.min(p,s.length),p>0&&(s=s.slice(0,-p))}if(\"number\"==typeof t.min_precision)for(t.min_precision=Math.max(0,t.min_precision);s.length<t.min_precision;)s+=\"0\"}if(t.group_sep!==!1){var d=\"string\"==typeof t.group_sep?t.group_sep:\",\",_=a.chunkString(o,t.group_width||3,!0);o=_.join(d)}var y=\"\";return r&&t.signed!==!1&&(y+=\"-\"),y+=o.length?o:\"0\",y+=s.length?\".\"+s:\"\"},i.prototype.to_human_full=function(t){t=t||{};var e=this.to_human(t),r=this._currency.to_human(),n=this._issuer.to_json(t),i=e+\"/\"+r;return this.is_native()?i:i+\"/\"+n},i.prototype.to_json=function(){if(this._is_native)return this.to_text();var t={value:this.to_text(),currency:this._currency.has_interest()?this._currency.to_hex():this._currency.to_json()};return this._issuer.is_valid()&&(t.issuer=this._issuer.to_json()),t},i.prototype.to_text_full=function(t){return this.is_valid()?this._is_native?this.to_human()+\"/XRP\":this.to_text()+\"/\"+this._currency.to_json()+\"/\"+this._issuer.to_json(t):\"NaN\"},i.prototype.not_equals_why=function(t,e){if(\"string\"==typeof t)return this.not_equals_why(i.from_json(t));if(!(t instanceof i))return\"Not an Amount\";if(!this.is_valid()||!t.is_valid())return\"Invalid amount.\";if(this._is_native!==t._is_native)return\"Native mismatch.\";var r=this._is_native?\"XRP\":\"Non-XRP\";if(!this._value.isZero()&&this._value.negated().equals(t._value))return r+\" sign differs.\";if(!this._value.equals(t._value))return r+\" value differs.\";if(!this._is_native){if(!this._currency.equals(t._currency))return\"Non-XRP currency differs.\";if(!e&&!this._issuer.equals(t._issuer))return\"Non-XRP issuer differs: \"+t._issuer.to_json()+\"/\"+this._issuer.to_json()}},e.Amount=i,e.Currency=f,e.Seed=c,e.UInt160=u},function(t,e,r){function n(t,e){function r(t){~n.subscribeEvents.indexOf(t)&&(!h._subs&&h._remote._connected&&h._remote.request_subscribe().add_account(h._account_id).broadcast().request(),h._subs+=1)}function i(t){~n.subscribeEvents.indexOf(t)&&(h._subs-=1,!h._subs&&h._remote._connected&&h._remote.request_unsubscribe().add_account(h._account_id).broadcast().request())}function o(t){h._account.is_valid()&&h._subs&&t.add_account(h._account_id)}function f(t){if(t.mmeta){var e=!1;t.mmeta.each(function(t){var r=t.fields.Account===h._account_id,n=r&&\"AccountRoot\"===t.entryType;n&&(s(h._entry,t.fieldsNew,t.fieldsFinal),e=!0)}),e&&h.emit(\"entry\",h._entry)}}a.call(this);var h=this;return this._remote=t,this._account=u.from_json(e),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on(\"newListener\",r),this.on(\"removeListener\",i),this._remote.on(\"prepare_subscribe\",o),this.on(\"transaction\",f),this._transactionManager=new c(this),this}var i=r(48),o=r(40),s=r(46),a=r(39).EventEmitter,u=(r(3).Amount,r(9).UInt160),c=r(30).TransactionManager,f=r(17).sjcl,h=r(7).Base;o.inherits(n,a),n.subscribeEvents=[\"transaction\",\"entry\"],n.prototype.toJson=function(){return this._account.to_json()},n.prototype.isValid=function(){return this._account.is_valid()},n.prototype.getInfo=function(t){return this._remote.requestAccountInfo({account:this._account_id},t)},n.prototype.entry=function(t){function e(e,n){e?t(e):(s(r._entry,n.account_data),r.emit(\"entry\",r._entry),t(null,n))}var r=this,t=\"function\"==typeof t?t:function(){};return this.getInfo(e),this},n.prototype.getNextSequence=function(t){function e(t){return t&&\"object\"==typeof t&&\"object\"==typeof t.remote&&\"actNotFound\"===t.remote.error}function r(r,n){e(r)?t(null,1):r?t(r):t(null,n.account_data.Sequence)}var t=\"function\"==typeof t?t:function(){};return this.getInfo(r),this},n.prototype.lines=function(t){function e(e,n){e?t(e):(r._lines=n.lines,r.emit(\"lines\",r._lines),t(null,n))}var r=this,t=\"function\"==typeof t?t:function(){};return this._remote.requestAccountLines({account:this._account_id},e),this},n.prototype.line=function(t,e,r){var n=this,r=\"function\"==typeof r?r:function(){};return n.lines(function(n,i){if(n)return r(n);var o;t:for(var s=0;s<i.lines.length;s++){var a=i.lines[s];if(a.account===e&&a.currency===t){o=a;break t}}r(null,o)}),this},n.prototype.notify=n.prototype.notifyTx=function(t){if(this._subs){this.emit(\"transaction\",t);var e=t.transaction.Account;if(e){var r=e===this._account_id;this.emit(r?\"transaction-outbound\":\"transaction-inbound\",t)}}},n.prototype.submit=function(t){this._transactionManager.submit(t)},n.prototype.publicKeyIsActive=function(t,e){function r(t){a.getInfo(function(e,r){e&&e.remote&&\"actNotFound\"===e.remote.error?t(null,null):t(e,r)})}function o(t,e){if(!t)return void(s===a._account_id?e(null,!0):e(null,!1));var r=t.account_data;r.RegularKey&&r.RegularKey===s?e(null,!0):r.Account===s&&0===(1048576&r.Flags)?e(null,!0):e(null,!1)}var s,a=this;try{s=n._publicKeyToAddress(t)}catch(u){return e(u)}var c=[r,o];i.waterfall(c,e)},n._publicKeyToAddress=function(t){function e(t){var e=f.codec.hex.toBits(t),r=f.hash.ripemd160.hash(f.hash.sha256.hash(e)),n=u.from_bits(r);return n.set_version(h.VER_ACCOUNT_ID),n.to_json()}if(u.is_valid(t))return t;if(/^[0-9a-fA-F]+$/.test(t))return e(t);throw new Error(\"Public key is invalid. Must be a UInt160 or a hex string\")},e.Account=n},function(t,e,r){function n(t){o.call(this);var e=this,r=\"object\"==typeof t;this.remote=t,this.tx_json={Flags:0},this._secret=void 0,this._build_path=!1,this._maxFee=r?this.remote.max_fee:void 0,this.state=\"unsubmitted\",this.finalized=!1,this.previousSigningHash=void 0,this.submitIndex=void 0,this.canonical=r?this.remote.canonical_signing:!0,this.submittedIDs=[],this.attempts=0,this.submissions=0,this.responses=0,this.once(\"success\",function(t){e.setState(\"validated\"),e.finalize(t),e._successHandler&&e._successHandler(t)}),this.once(\"error\",function(t){e.setState(\"failed\"),e.finalize(t),e._errorHandler&&e._errorHandler(t)}),this.once(\"submitted\",function(){e.setState(\"submitted\")}),this.once(\"proposed\",function(){e.setState(\"pending\")})}var i=r(40),o=(r(41),r(39).EventEmitter),s=r(17),a=r(17).sjcl,u=r(3).Amount,c=r(3).Currency,f=r(3).UInt160,h=r(11).Seed,l=r(13).SerializedObject,p=r(14).RippleError,d=r(28),_=r(25),y=r(29).internal.sub(\"transaction\");i.inherits(n,o),n.fee_units={\"default\":10},n.flags={Universal:{FullyCanonicalSig:2147483648},AccountSet:{RequireDestTag:65536,OptionalDestTag:131072,RequireAuth:262144,OptionalAuth:524288,DisallowXRP:1048576,AllowXRP:2097152},TrustSet:{SetAuth:65536,NoRipple:131072,SetNoRipple:131072,ClearNoRipple:262144,SetFreeze:1048576,ClearFreeze:2097152},OfferCreate:{Passive:65536,ImmediateOrCancel:131072,FillOrKill:262144,Sell:524288},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},n.set_clear_flags={AccountSet:{asfRequireDest:1,asfRequireAuth:2,asfDisallowXRP:3,asfDisableMaster:4,asfAccountTxnID:5,asfNoFreeze:6,asfGlobalFreeze:7,asfDefaultRipple:8}},n.MEMO_TYPES={},n.ASCII_REGEX=/^[\\x00-\\x7F]*$/,n.formats=r(16).tx,n.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},n.prototype.isTelLocal=function(t){return t>=this.consts.telLOCAL_ERROR&&t<this.consts.temMALFORMED},n.prototype.isTemMalformed=function(t){return t>=this.consts.temMALFORMED&&t<this.consts.tefFAILURE},n.prototype.isTefFailure=function(t){return t>=this.consts.tefFAILURE&&t<this.consts.terRETRY},n.prototype.isTerRetry=function(t){return t>=this.consts.terRETRY&&t<this.consts.tesSUCCESS},n.prototype.isTepSuccess=function(t){return t>=this.consts.tesSUCCESS},n.prototype.isTecClaimed=function(t){return t>=this.consts.tecCLAIMED},n.prototype.isRejected=function(t){return this.isTelLocal(t)||this.isTemMalformed(t)||this.isTefFailure(t)},n.from_json=function(t){return(new n).parseJson(t)},n.prototype.parseJson=function(t){return this.tx_json=t,this},n.prototype.setState=function(t){this.state!==t&&(this.state=t,this.emit(\"state\",t))},n.prototype.finalize=function(t){return this.finalized=!0,this.result?(this.result.ledger_index=t.ledger_index,this.result.ledger_hash=t.ledger_hash):(this.result=t,this.result.tx_json=this.tx_json),this.emit(\"cleanup\"),this.emit(\"final\",t),this.remote&&this.remote.trace&&y.info(\"transaction finalized:\",this.tx_json,this.getManager()._pending.getLength()),this},n.prototype.getAccount=function(){return this.tx_json.Account},n.prototype.getTransactionType=function(){return this.tx_json.TransactionType},n.prototype.getManager=function(t){return this.remote?(t||(t=this.tx_json.Account),this.remote.account(t)._transactionManager):void 0},n.prototype.getSecret=n.prototype._accountSecret=function(t){return this.remote?(t||(t=this.tx_json.Account),this.remote.secrets[t]):void 0},n.prototype._getFeeUnits=n.prototype.feeUnits=function(){return n.fee_units[\"default\"]},n.prototype._computeFee=function(){if(!this.remote)return void 0;for(var t=this.remote._servers,e=[],r=0;r<t.length;r++){var n=t[r];n._connected&&e.push(Number(n._computeFee(this._getFeeUnits())))}switch(e.length){case 0:return;case 1:return String(e[0])}e.sort(function(t,e){return t>e?1:e>t?-1:0});var i=Math.floor(e.length/2),o=e.length%2===0?Math.floor(.5+(e[i]+e[i-1])/2):e[i];return String(o)},n.prototype.complete=function(){if(this.remote&&!this.remote.trusted&&!this.remote.local_signing)return this.emit(\"error\",new p(\"tejServerUntrusted\",\"Attempt to give secret to untrusted server\")),!1;if(!this._secret&&!(this._secret=this.getSecret()))return this.emit(\"error\",new p(\"tejSecretUnknown\",\"Missing secret\")),!1;if(\"undefined\"==typeof this.tx_json.SigningPubKey)try{var t=h.from_json(this._secret),e=t.get_key(this.tx_json.Account);this.tx_json.SigningPubKey=e.to_hex_pub()}catch(r){return this.emit(\"error\",new p(\"tejSecretInvalid\",\"Invalid secret\")),!1}return!this.remote||\"undefined\"!=typeof this.tx_json.Fee||!this.remote.local_fee&&this.remote.trusted||(this.tx_json.Fee=this._computeFee())?Number(this.tx_json.Fee)>this._maxFee?(this.emit(\"error\",new p(\"tejMaxFeeExceeded\",\"Max fee exceeded\")),!1):(this.remote&&this.remote.local_signing&&this.canonical&&(this.tx_json.Flags|=n.flags.Universal.FullyCanonicalSig,this.tx_json.Flags=this.tx_json.Flags>>>0),this.tx_json):(this.emit(\"error\",new p(\"tejUnconnected\")),!1)},n.prototype.serialize=function(){return l.from_json(this.tx_json)},n.prototype.signingHash=function(){return this.hash(_.testnet?\"HASH_TX_SIGN_TESTNET\":\"HASH_TX_SIGN\")},n.prototype.hash=function(t,e,r){if(\"string\"==typeof t){if(\"undefined\"==typeof d[t])throw new Error(\"Unknown hashing prefix requested.\");t=d[t]}else t||(t=d.HASH_TX_ID);var n=(r||this.serialize()).hash(t);return e?n:n.to_hex()},n.prototype.sign=function(){var t=h.from_json(this._secret),e=this.tx_json.TxnSignature;delete this.tx_json.TxnSignature;var r=this.signingHash();if(e&&r===this.previousSigningHash)return this.tx_json.TxnSignature=e,this;var n=t.get_key(this.tx_json.Account),i=n.sign(r,0),o=a.codec.hex.fromBits(i).toUpperCase();return this.tx_json.TxnSignature=o,this.previousSigningHash=r,this},n.prototype.addId=function(t){-1===this.submittedIDs.indexOf(t)&&this.submittedIDs.unshift(t)},n.prototype.findId=function(t){for(var e,r=0;r<this.submittedIDs.length;r++){var n=this.submittedIDs[r];if(e=t[n])break}return e},n.prototype.setBuildPath=n.prototype.buildPath=function(t){return this._build_path=t,this},n.prototype.sourceTag=function(t){return\"number\"==typeof t&&isFinite(t)&&(this.tx_json.SourceTag=t),this},n.prototype.setDestinationTag=n.prototype.destinationTag=function(t){return\"number\"==typeof t&&isFinite(t)&&(this.tx_json.DestinationTag=t),this},n.prototype.setInvoiceID=n.prototype.invoiceID=function(t){if(\"string\"==typeof t){for(;t.length<64;)t+=\"0\";this.tx_json.InvoiceID=t}return this},n.prototype.setClientID=n.prototype.clientID=function(t){return\"string\"==typeof t&&(this._clientID=t),this},n.prototype.setLastLedger=n.prototype.lastLedger=function(t){return\"number\"==typeof t&&isFinite(t)&&(this._setLastLedger=!0,this.tx_json.LastLedgerSequence=t),this},n.prototype.maxFee=function(t){return\"number\"==typeof t&&t>=0&&(this._setMaxFee=!0,this._maxFee=t),this},n.prototype.setFixedFee=function(t){return\"number\"==typeof t&&t>=0&&(this._setFixedFee=!0,this.tx_json.Fee=String(t)),this},n._rewritePath=function(t){if(!Array.isArray(t))throw new Error(\"Path must be an array\");var e=t.map(function(t){var e={};return t.hasOwnProperty(\"account\")&&(e.account=f.json_rewrite(t.account)),t.hasOwnProperty(\"issuer\")&&(e.issuer=f.json_rewrite(t.issuer)),t.hasOwnProperty(\"currency\")&&(e.currency=c.json_rewrite(t.currency)),t.hasOwnProperty(\"type_hex\")&&(e.type_hex=t.type_hex),e});return e},n.prototype.addPath=n.prototype.pathAdd=function(t){return Array.isArray(t)&&(this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(n._rewritePath(t))),this},n.prototype.setPaths=n.prototype.paths=function(t){if(Array.isArray(t))for(var e=0,r=t.length;r>e;e++)this.addPath(t[e]);return this},n.prototype.setSecret=n.prototype.secret=function(t){return\"string\"==typeof t&&(this._secret=t),this},n.prototype.setSendMax=n.prototype.sendMax=function(t){return t&&(this.tx_json.SendMax=u.json_rewrite(t)),this},n.prototype.transferRate=function(t){return\"number\"==typeof t&&t>=1e9&&(this.tx_json.TransferRate=t),this},n.prototype.setFlags=function(t){if(void 0===t)return this;if(\"number\"==typeof t)return this.tx_json.Flags=t,this;for(var e=n.flags[this.getTransactionType()]||{},r=Array.isArray(t)?t:[].slice.call(arguments),i=0,o=r.length;o>i;i++){var s=r[i];if(!e.hasOwnProperty(s))return this.emit(\"error\",new p(\"tejInvalidFlag\"));this.tx_json.Flags+=e[s]}return this},n.prototype.addMemo=function(t,e,r){function i(t){var e=a.codec.utf8String.toBits(t);return a.codec.hex.fromBits(e).toUpperCase()}if(\"object\"==typeof t){var o=t;t=o.memoType,e=o.memoFormat,r=o.memoData}if(!/(undefined|string)/.test(typeof t))throw new Error(\"MemoType must be a string\");if(!n.ASCII_REGEX.test(t))throw new Error(\"MemoType must be valid ASCII\");if(!/(undefined|string)/.test(typeof e))throw new Error(\"MemoFormat must be a string\");if(!n.ASCII_REGEX.test(e))throw new Error(\"MemoFormat must be valid ASCII\");var s={};if(t&&(n.MEMO_TYPES[t]&&(t=n.MEMO_TYPES[t]),s.MemoType=i(t)),e&&(s.MemoFormat=i(e)),r){if(\"string\"!=typeof r){if(\"json\"!==e)throw new Error(\"MemoData can only be a JSON object with a valid json MemoFormat\");try{r=JSON.stringify(r)}catch(u){throw new Error(\"MemoFormat json with invalid JSON in MemoData field\")}}s.MemoData=i(r)}return this.tx_json.Memos=(this.tx_json.Memos||[]).concat({Memo:s}),this},n.prototype.setAccountTxnID=n.prototype.accountTxnID=function(t){return\"string\"==typeof t&&(this.tx_json.AccountTxnID=t),this},n.prototype.accountSet=function(t,e,r){function i(t){return\"number\"==typeof t?t:s[t]||s[\"asf\"+t]}if(\"object\"==typeof t){var o=t;t=o.source||o.from||o.account,e=o.set_flag||o.set,r=o.clear_flag||o.clear}if(!f.is_valid(t))throw new Error(\"Source address invalid\");this.tx_json.TransactionType=\"AccountSet\",this.tx_json.Account=f.json_rewrite(t);var s=n.set_clear_flags.AccountSet;return e&&(e=i(e))&&(this.tx_json.SetFlag=e),r&&(r=i(r))&&(this.tx_json.ClearFlag=r),this},n.prototype.claim=function(t,e,r,n){if(\"object\"==typeof t){var i=t;n=i.signature,r=i.public_key,e=i.generator,t=i.source||i.from||i.account}return this.tx_json.TransactionType=\"Claim\",this.tx_json.Generator=e,this.tx_json.PublicKey=r,this.tx_json.Signature=n,this},n.prototype.offerCancel=function(t,e){if(\"object\"==typeof t){var r=t;e=r.sequence,t=r.source||r.from||r.account}if(!f.is_valid(t))throw new Error(\"Source address invalid\");return this.tx_json.TransactionType=\"OfferCancel\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.OfferSequence=Number(e),this},n.prototype.offerCreate=function(t,e,r,n,i){if(\"object\"==typeof t){var o=t;i=o.cancel_sequence||o.sequence,n=o.expiration,r=o.taker_gets||o.sell,e=o.taker_pays||o.buy,t=o.source||o.from||o.account}if(!f.is_valid(t))throw new Error(\"Source address invalid\");return this.tx_json.TransactionType=\"OfferCreate\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.TakerPays=u.json_rewrite(e),this.tx_json.TakerGets=u.json_rewrite(r),n&&(this.tx_json.Expiration=s.time.toRipple(n)),i&&(this.tx_json.OfferSequence=Number(i)),this},n.prototype.setRegularKey=function(t,e){if(\"object\"==typeof t){var r=t;t=r.address||r.account||r.from,e=r.regular_key}if(!f.is_valid(t))throw new Error(\"Source address invalid\");if(!f.is_valid(e))throw new Error(\"RegularKey must be a valid Ripple Address\");return this.tx_json.TransactionType=\"SetRegularKey\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.RegularKey=f.json_rewrite(e),this},n.prototype.payment=function(t,e,r){if(\"object\"==typeof t){var n=t;r=n.amount,e=n.destination||n.to,t=n.source||n.from||n.account}if(!f.is_valid(t))throw new Error(\"Payment source address invalid\");if(!f.is_valid(e))throw new Error(\"Payment destination address invalid\");return this.tx_json.TransactionType=\"Payment\",this.tx_json.Account=f.json_rewrite(t),this.tx_json.Amount=u.json_rewrite(r),this.tx_json.Destination=f.json_rewrite(e),this},n.prototype.trustSet=n.prototype.rippleLineSet=function(t,e,r,n){if(\"object\"==typeof t){var i=t;n=i.quality_out,r=i.quality_in,e=i.limit,t=i.source||i.from||i.account}if(!f.is_valid(t))throw new Error(\"Source address invalid\");return this.tx_json.TransactionType=\"TrustSet\",this.tx_json.Account=f.json_rewrite(t),void 0!==e&&(this.tx_json.LimitAmount=u.json_rewrite(e)),r&&(this.tx_json.QualityIn=r),n&&(this.tx_json.QualityOut=n),this},n.prototype.submit=function(t){var e=this;return this.callback=\"function\"==typeof t?t:function(){},this._errorHandler=function(t,r){t instanceof p||(t=new p(t,r)),e.callback(t)},this._successHandler=function(t){e.callback(null,t)},this.remote?(this.getManager().submit(this),this):void this.emit(\"error\",new Error(\"No remote found\"))},n.prototype.abort=function(){this.finalized||this.emit(\"error\",new p(\"tejAbort\",\"Transaction aborted\"))},n.prototype.summary=function(){var t={tx_json:this.tx_json,clientID:this._clientID,submittedIDs:this.submittedIDs,submissionAttempts:this.attempts,submitIndex:this.submitIndex,initialSubmitIndex:this.initialSubmitIndex,lastLedgerSequence:this.lastLedgerSequence,state:this.state,server:this._server?this._server._opts.url:void 0,finalized:this.finalized};return this.result&&(t.result={engine_result:this.result.engine_result,engine_result_message:this.result.engine_result_message,ledger_hash:this.result.ledger_hash,ledger_index:this.result.ledger_index,transaction_hash:this.result.tx_json.hash}),t},e.Transaction=n},function(t,e,r){\"use strict\";var n=r(46),i=r(9).UInt160,o=r(17),s=r(31).Float,a=n(function(){this._value=0/0,this._update()},i);a.prototype=n({},i.prototype),a.prototype.constructor=a,a.HEX_CURRENCY_BAD=\"0000000000000000000000005852500000000000\",a.prototype.human_RE=/^\\s*([a-zA-Z0-9\\<\\>\\(\\)\\{\\}\\[\\]\\|\\?\\!\\@\\#\\$\\%\\^\\&]{3})(\\s*-\\s*[- \\w]+)?(\\s*\\(-?\\d+\\.?\\d*%pa\\))?\\s*$/,a.from_json=function(t,e){return(new a).parse_json(t,e)},a.from_human=function(t,e){return(new a).parse_human(t,e)},a.prototype.parse_json=function(t,e){if(this._value=0/0,t instanceof a)return this._value=t.copyTo({})._value,this._update(),this;switch(typeof t){case\"number\":isNaN(t)||this.parse_number(t);break;case\"string\":if(!t||\"0\"===t){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}if(\"1\"===t){this.parse_hex(a.HEX_ONE);break}if(/^[A-F0-9]{40}$/.test(t)){this.parse_hex(t);break}var r=t.match(this.human_RE);if(r){var n=r[1];if(!n||/^(0|XRP)$/.test(n)){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}var i=r[3]||\"\",u=i.match(/(-?\\d+\\.?\\d+)/);n=n.toUpperCase();var c=o.arraySet(20,0);if(u){c[0]=1,c[1]=255&n.charCodeAt(0),c[2]=255&n.charCodeAt(1),c[3]=255&n.charCodeAt(2),u=parseFloat(u[0]);for(var f=31536e3,h=f/Math.log(1+u/100),l=s.toIEEE754Double(h),p=0;p<=l.length;p++)c[8+p]=255&l[p]}else c[12]=255&n.charCodeAt(0),c[13]=255&n.charCodeAt(1),c[14]=255&n.charCodeAt(2);this.parse_bytes(c)}}return this},a.prototype.parse_human=function(t){return this.parse_json(t)},a.prototype._update=function(){var t=this.to_bytes(),e=!0;if(t){this._native=!1,this._type=-1,this._interest_start=0/0,this._interest_period=0/0,this._iso_code=\"\";for(var r=0;20>r;r++)e=e&&(12===r||13===r||14===r||0===t[r]);e?(this._iso_code=String.fromCharCode(t[12])+String.fromCharCode(t[13])+String.fromCharCode(t[14]),\"\\x00\\x00\\x00\"===this._iso_code&&(this._native=!0,this._iso_code=\"XRP\"),this._type=0):1===t[0]&&(this._iso_code=String.fromCharCode(t[1])+String.fromCharCode(t[2])+String.fromCharCode(t[3]),this._type=1,this._interest_start=(t[4]<<24)+(t[5]<<16)+(t[6]<<8)+t[7],this._interest_period=s.fromIEEE754Double(t.slice(8,16)))}},a.prototype.is_native=function(){return this._native},a.prototype.has_interest=function(){return 1===this._type&&!isNaN(this._interest_start)&&!isNaN(this._interest_period)},a.prototype.get_interest_at=function(t){return this.has_interest()?(t||(t=this._interest_start+31536e3),t instanceof Date&&(t=o.fromTimestamp(t.getTime())),Math.exp((t-this._interest_start)/this._interest_period)):0},a.prototype.get_interest_percentage_at=function(t,e){var r=this.get_interest_at(t,e);r=100*r-100;var n=e?Math.pow(10,e):100;return Math.round(r*n)/n},a.prototype.to_json=function(t){if(!this.is_valid())return\"XRP\";t||(t={});var e,r=t&&t.full_name?\" - \"+t.full_name:\"\";if(t.show_interest=void 0!==t.show_interest?t.show_interest:this.has_interest(),!t.force_hex&&/^[A-Z0-9]{3}$/.test(this._iso_code)){if(e=this._iso_code+r,t.show_interest){var n=isNaN(t.decimals)?void 0:t.decimals,i=this.has_interest()?this.get_interest_percentage_at(this._interest_start+31536e3,n):0;","","/node_modules/ripple-lib/build/ripple-0.12.2.js:","\t4315: \t        self._remote.request_subscribe()","","/node_modules/ripple-lib/src/js/ripple/account.js:","\t46:         self._remote.request_subscribe()","","/node_modules/ripple-lib/test/transaction-manager-test.js:","\t73:     rippled.on('request_subscribe', function(message, c) {","","Found 8 matches in 6 files ","",""]},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":[" "]},{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["Searching for \u0001onPayment\u0001 in\u0001/node_modules/ripple-account-monitor/node_modules/ripple-rest-client\u0001","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["Found 0 matches in 0 files ",""]},{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""]},{"start":{"row":0,"column":98},"end":{"row":0,"column":127},"action":"insert","lines":[" (Found 0 matches in 0 files)"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":9},"action":"remove","lines":["Searching"]},{"start":{"row":0,"column":1},"end":{"row":4,"column":0},"action":"remove","lines":["for \u0001onPayment\u0001 in\u0001/node_modules/ripple-account-monitor/node_modules/ripple-rest-client\u0001 (Found 0 matches in 0 files)","","Found 0 matches in 0 files ","",""]},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":[" "]},{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["Searching for \u0001get_all_collections\u0001 in\u0001/\u0001","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["/get_all_collections.js:",""]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["\t6: function get_all_collections(callback){","\t20: exports.get_all_collections = get_all_collections;","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"insert","lines":["Found 3 matches in 1 file ",""]},{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":0,"column":41},"end":{"row":0,"column":69},"action":"insert","lines":[" (Found 3 matches in 1 file)"]}]}]]},"ace":{"folds":[],"customSyntax":"c9search","scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":0},"end":{"row":8,"column":0},"isBackwards":false},"options":{"tabSize":4,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":0}}